(this["webpackJsonpdepositium-ui"]=this["webpackJsonpdepositium-ui"]||[]).push([[0],{229:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(12),a=n.n(r),i=n(27),o=n(41),c=n.n(o),s=n(52),l=n(28),d=function(t){var n=t.methodName,r=t.args,a=void 0===r?{}:r;return s.c.connection.provider.query({account_id:l.a.financeContractId,args_base64:e.from(JSON.stringify(a)).toString("base64"),finality:"final",method_name:n,request_type:"call_function"}).then((function(t){var n=t.result;return JSON.parse(e.from(n).toString())}))};function u(){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(a.a.mark((function e(){var t,n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({args:{pool_id:7},methodName:"get_pool"});case 2:return t=e.sent,n=new c.a(t.amounts[0]).div(c.a.pow(10,6)),r=new c.a(t.amounts[1]).div(c.a.pow(10,24)),i=n.div(r),e.abrupt("return",new c.a(i.toFixed(10)));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(65).Buffer)},241:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(15),a=n(35),i=n(12),o=n.n(i),c=n(27),s=n(41),l=n.n(s),d=n(52),u=n(28),p=n(36),f=function(t){var n=t.contractId,r=t.methodName,a=t.args,i=void 0===a?{}:a,o=d.c;return n===u.a.financeContractId&&(o=d.b),o.connection.provider.query({account_id:n,args_base64:e.from(JSON.stringify(i)).toString("base64"),finality:"final",method_name:r,request_type:"call_function"}).then((function(t){var n=t.result;return JSON.parse(e.from(n).toString())}))};function b(){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(o.a.mark((function e(){var t,n,i,c,s,d,b,h,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetch balance from contract",u.a.depositiumContractId),e.next=3,p.a.account();case 3:return n=e.sent,e.next=6,f({args:{account_id:n.accountId},contractId:u.a.depositiumContractId,methodName:"balance_of"});case 6:i=e.sent,c={},console.log("balances res",i),s=Object(a.a)(i);try{for(s.s();!(d=s.n()).done;)b=Object(r.a)(d.value,2),h=b[0],x=b[1],c[h]=new l.a(x).div(l.a.pow(10,24)).toFixed(2)}catch(o){s.e(o)}finally{s.f()}return console.log("balances",c),e.abrupt("return",null!==(t=c["wrap_near-aromankov.testnet"])&&void 0!==t?t:0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(65).Buffer)},28:function(e,t,n){"use strict";t.a={depositiumContractId:"dev-1635790864486-82226254893063",explorerUrl:"https://explorer.testnet.near.org",helperUrl:"https://helper.testnet.near.org'",indexerUrl:"https://testnet-indexer.ref-finance.com",networkId:"TESTNET",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",wrapNearContractId:"wrap_near-aromankov.testnet",financeContractId:"ref-exchange-aromankov.testnet",farmingContractId:"ref-farming-aromankov.testnet",activeFarms:"ref-exchange-aromankov.testnet@2#1".split(","),availableFarms:"ref-exchange-aromankov.testnet@2#1".split(",")}},285:function(e,t){},294:function(e,t){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},36:function(e,t,n){"use strict";var r=n(52),a=n(54),i=n(28),o=new a.WalletConnection(r.c,i.a.depositiumContractId);t.a=o},452:function(e,t){},453:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(72),o=n.n(i),c=n(110),s=n(63),l=n(41),d=n.n(l),u=n(52),p=function(e,t,n){if(!e||!t||!n)return"0";try{new d.a(n)}catch(r){return"0"}return new d.a(e).div(100).div("365").times(t).times(n).toFixed(2)},f=Object(s.d)({initialState:{f_ref_near:{apr:54.3,days:30,depositAmount:"",depositAmountUSD:0,profit:0,profitUSD:0},f_usdt_near:{apr:94.3,days:30,depositAmount:"",depositAmountUSD:0,profit:0,profitUSD:0}},name:"strategyItem",reducers:{changeDays:function(e,t){var n=t.payload,r=n.value,a=e[n.strategyId];a.days=r,a.profit=p(a.apr,a.days,a.depositAmount)},changeDepositAmount:function(e,t){var n=t.payload,r=n.value,a=e[n.strategyId];a.depositAmount=r,a.profit=p(a.apr,a.days,a.depositAmount)},startStrategy:function(e,t){var n=t.payload,r=n.strategyId,a=n.amount;console.log("start strategy",r),Object(u.d)(a).then((function(e){console.log("start strategy res:",e)})).catch((function(e){return console.log("startStrategy err",e)}))}}}),b=f.actions,h=(b.changeDepositAmount,b.changeDays,b.startStrategy),x=f.reducer,j=n(12),m=n.n(j),g=n(27),y=n(229),O=Object(s.c)("prices/fetchPrices",Object(g.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching the prices"),e.next=3,Object(y.a)();case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))),v=Object(s.d)({extraReducers:function(e){e.addCase(O.pending,(function(e){e.status="loading"})).addCase(O.fulfilled,(function(e,t){e.status="idle",console.log("action.payload",t.payload),e.nearPrice=t.payload}))},initialState:{nearPrice:0},name:"prices"}).reducer,w=n(61),C=Object(s.b)("Balance/updateBalance",(function(e){return{payload:e}})),S=Object(s.b)("Balance/updateRate",(function(e){return{payload:e}})),k=Object(s.d)({extraReducers:function(e){e.addCase(C,(function(e,t){return Object(w.a)(Object(w.a)({},e),{},{balance:t.payload})})).addCase(S,(function(e,t){return Object(w.a)(Object(w.a)({},e),{},{rate:t.payload})}))},initialState:{balance:0,rate:0},name:"Balance",reducers:{}}).reducer,F=Object(s.a)({reducer:{balance:k,prices:v,strategyItem:x}}),I=(n(338),n(339),n(517)),_=n(256),A=n(514),D=n(515),N=(n(340),n(36)),z=n(15),R=n(516),H=n(511),W=n(513),T=n(505),L=n(518),E=n(508),B=n(240),M=n.n(B),U=n(4),P=function(){return Object(U.jsx)("svg",{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(U.jsx)("path",{d:"M1.00012 1L5.92941 5.92929C5.96846 5.96834 6.03178 5.96834 6.07083 5.92929L11.0001 1",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})})},V=a.a.memo(P),$=n(500),Z=n(17),q=n(519),J=n(112),K=n(101),G=function(){return Object(U.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(U.jsx)("path",{d:"M2.24921 0.594416L2.34421 0.678302L6.62268 4.95693L10.9012 0.678302C11.295 0.284479 11.9335 0.284479 12.3273 0.678302C12.6908 1.04183 12.7188 1.61386 12.4112 2.00946L12.3273 2.10446L8.04868 6.38294L12.3273 10.6614C12.7211 11.0552 12.7211 11.6938 12.3273 12.0876C11.9638 12.4511 11.3918 12.4791 10.9962 12.1715L10.9012 12.0876L6.62268 7.80894L2.34421 12.0876C1.95039 12.4814 1.31187 12.4814 0.918049 12.0876C0.55452 11.724 0.526555 11.152 0.834156 10.7564L0.918049 10.6614L5.19669 6.38294L0.918049 2.10446C0.524226 1.71064 0.524226 1.07212 0.918049 0.678302C1.28158 0.314773 1.85361 0.286815 2.24921 0.594416Z",fill:"black"})})},Y=a.a.memo(G),X=function(e){var t=e.amount,n=e.onAmountChange,a=e.errorMessage,i=Object(r.useCallback)((function(e){n(e.target.value)}),[n]),o=Object(r.useMemo)((function(){return void 0===a&&Number(t)?(Number(t)*F.getState().balance.rate).toFixed(2):0}),[t,a]);return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("input",{value:t,onChange:i,style:{backgroundColor:"#FFFFFF",border:"1px solid #DDDDDD",borderRadius:5,boxSizing:"border-box",flexGrow:1,fontSize:12,fontStyle:"normal",fontWeight:"normal",height:33,lineHeight:"26px",maxLines:1,overflowX:"scroll",paddingLeft:14,paddingRight:14,resize:"none",whiteSpace:"nowrap"},placeholder:"NEAR"}),Object(U.jsx)("div",{style:{border:"1px solid #000000",margin:"0px 6px 0px 6px ",opacity:.2,width:13}}),Object(U.jsx)("div",{style:{backgroundColor:"#383838",border:"1px solid #413F3F",borderRadius:5,boxShadow:"inset 0px 4px 4px #383030",boxSizing:"border-box",display:"flex",height:33,justifyContent:"center",minWidth:160,paddingTop:4},children:Object(U.jsx)("div",{style:{color:"#FFFFFF",fontSize:12,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"$ ".concat(o)})})]}),Object(U.jsx)("div",{style:{height:12},children:Object(U.jsx)("div",{style:{color:"red",fontSize:11,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:a})})]})},Q=a.a.memo(X),ee=K.b().shape({amount:K.a().typeError("Invalid amount!").min(10,"Min amount is 10!").max(1e4,"Max amount is 10000!")}),te=function(e){var t=e.onClose,n=e.onDeposit,i=Object(r.useCallback)((function(e){var t=e.amount;n(t)}),[n]);return Object(U.jsx)(a.a.Fragment,{children:Object(U.jsx)(J.b,{initialValues:{amount:""},validationSchema:ee,onSubmit:i,children:function(e){var n=e.errors,r=(e.touched,e.values),a=e.handleChange,i=e.handleSubmit;return Object(U.jsxs)("div",{style:{backgroundColor:"#E9EDF0",border:"1px solid #E9EDF0",borderRadius:10,boxShadow:"0px 4px 10px rgba(204, 204, 204, 0.25)",boxSizing:"border-box",left:"50%",paddingBottom:26,paddingTop:28,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"auto"},children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",paddingLeft:39,paddingRight:18},children:[Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:20,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"Deposit NEAR"}),Object(U.jsx)(L.a,{onClick:t,"aria-label":"delete",size:"small",children:Object(U.jsx)(Y,{})})]}),Object(U.jsx)("div",{style:{border:"1px solid #000000",margin:"10px 0px 20px 0px ",opacity:.2}}),Object(U.jsxs)(J.a,{children:[Object(U.jsx)("div",{style:{paddingLeft:39,paddingRight:39},children:Object(U.jsx)(Q,{amount:r.amount,onAmountChange:a("amount"),errorMessage:n.amount})}),Object(U.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:14},children:Object(U.jsx)(ne,{disabled:void 0!==n.amount&&0===r.amount.length,onClick:function(){return i()},children:"Deposit"})})]})]})}})})},ne=Object(Z.a)(q.a)({backgroundColor:"#0097A7",borderRadius:20,color:"#FFFFFF",fontSize:"12px",fontStyle:"normal",fontWeight:"bold",height:33,lineHeight:"26px",marginRight:"8px",padding:"6px",textTransform:"none",width:110}),re=a.a.memo(te),ae=n(509),ie=function(){var e=Object(r.useState)(!1),t=Object(z.a)(e,2),n=t[0],a=t[1],i=Object(r.useCallback)((function(){a(!0)}),[]),o=Object(r.useCallback)((function(){a(!1)}),[]),c=Object(r.useCallback)(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.e)(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=r.useState(null),l=Object(z.a)(s,2),d=l[0],p=l[1],f=Boolean(d),b=Object(r.useCallback)((function(e){p(e.currentTarget)}),[]),h=Object(r.useCallback)((function(){p(null)}),[]),x=Object(r.useCallback)((function(){N.a.signOut(),window.location.reload()}),[]);return Object(U.jsxs)(r.Fragment,{children:[Object(U.jsxs)(D.a,{sx:{alignItems:"center",display:"flex",textAlign:"center"},children:[Object(U.jsx)(oe,{onClick:i,variant:"text",startIcon:Object(U.jsx)($.a,{fontSize:"small"}),children:"Deposit"}),Object(U.jsx)("div",{style:{border:"1px solid #CADEEF",height:32,marginLeft:24,marginRight:20}}),Object(U.jsx)("div",{style:{color:"#FFFFFF",fontSize:14,fontStyle:"normal",fontWeight:600,letterSpacing:"0.2px",lineHeight:"20px",marginLeft:5},children:N.a.account().accountId}),Object(U.jsx)(E.a,{title:"Account settings",children:Object(U.jsxs)(L.a,{onClick:b,size:"small",sx:{ml:2},children:[Object(U.jsx)(R.a,{sx:{height:44,marginRight:"11px",width:44},children:N.a.account().accountId[0]}),Object(U.jsx)(V,{})]})})]}),Object(U.jsx)(H.a,{anchorEl:d,open:f,onClose:h,onClick:h,PaperProps:{elevation:0,sx:{"& .MuiAvatar-root":{height:32,ml:-.5,mr:1,width:32},"&:before":{bgcolor:"background.paper",content:'""',display:"block",height:10,position:"absolute",right:14,top:0,transform:"translateY(-50%) rotate(45deg)",width:10,zIndex:0},filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,overflow:"visible"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:Object(U.jsxs)(W.a,{onClick:x,children:[Object(U.jsx)(T.a,{children:Object(U.jsx)(M.a,{fontSize:"small"})}),"Logout"]})}),Object(U.jsx)(ae.a,{open:n,onClose:o,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:Object(U.jsx)(re,{onDeposit:c,onClose:o})})]})},oe=Object(Z.a)(q.a)({color:"#FFFFFF",fontSize:14,fontStyle:"normal",fontWeight:600,letterSpacing:"0.2px",lineHeight:"20px",padding:"6px",textTransform:"none"}),ce=r.memo(ie),se=function(){var e=Object(r.useCallback)((function(){N.a.requestSignIn()}),[]);return Object(U.jsx)(le,{variant:"contained",endIcon:Object(U.jsx)("img",{src:"./icons/near.png",height:24,width:24}),onClick:e,children:"Connect NEAR"})},le=Object(Z.a)(q.a)({backgroundColor:"#FFFFFF",padding:"6px 12px 6px 12px",textTransform:"none"}),de=a.a.memo(se),ue=function(){return Object(U.jsxs)("div",{className:"Header",children:[Object(U.jsx)("div",{style:{color:"#FFFFFF",fontSize:"36px",fontStyle:"normal",fontWeight:"bold",lineHeight:"26px",opacity:.3},children:"Depositium"}),Object(U.jsx)(D.a,{children:N.a.isSignedIn()?Object(U.jsx)(ce,{}):Object(U.jsx)(de,{})})]})},pe=a.a.memo(ue),fe=n(241);var be=function(){return Object(U.jsx)(D.a,{sx:{backgroundColor:"#0097A7",height:"100%",px:5,py:8},children:Object(U.jsx)(he,{})})},he=function(){var e=function(){var e=Object(r.useState)("~"),t=Object(z.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)("~"),o=Object(z.a)(i,2),c=o[0],s=o[1],l=Object(r.useState)("~"),p=Object(z.a)(l,2),f=p[0],b=p[1];return Object(r.useEffect)((function(){function e(){return e=Object(g.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.a)();case 2:return n=e.sent,a(n),F.dispatch(C(null!==(t=Number(n))&&void 0!==t?t:0)),e.next=7,Object(u.a)();case 7:r=e.sent,s(r.near.usd),b(new d.a(r.near.usd).times(n).toFixed(2)),F.dispatch(S(r.near.usd));case 11:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{balance:n,fiatAmount:f,rate:c}}(),t=e.balance,n=e.rate,a=e.fiatAmount;return Object(U.jsxs)("div",{style:{alignItems:"center",backgroundColor:"#F8F8F8",borderRadius:10,display:"flex",paddingLeft:19,paddingRight:21},children:[Object(U.jsx)(xe,{token:"NEAR",style:{height:38,marginBottom:19,marginTop:17,width:38}}),Object(U.jsxs)("div",{style:{marginBottom:12,marginLeft:12,marginTop:19,width:"100%"},children:[Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{fontSize:16,fontStyle:"normal",fontWeight:"bold",lineHeight:"20px",textTransform:"uppercase"},children:"Near"}),Object(U.jsx)("div",{style:{fontSize:14,fontStyle:"normal",fontWeight:"bold",lineHeight:"20px",textTransform:"uppercase"},children:"".concat(t," NEAR")})]}),Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{fontSize:12,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:"$ ".concat(n)}),Object(U.jsx)("div",{style:{fontSize:12,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:"$".concat(a," USD")})]})]})]})},xe=function(e){var t=e.token,n=e.style,a=Object(r.useMemo)((function(){switch(t){case"REF":return"./icons/ref.png";case"NEAR":return"./icons/near.png";case"USDT":return"./icons/usdt.png"}}),[t]);return Object(U.jsx)("img",{style:n,src:a,height:"24px",width:"24px"})},je=a.a.memo(be),me=n(22),ge=n(35),ye=n(3),Oe=n(507),ve=n(71),we=n(92);function Ce(e){for(var t=/(-?\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e}var Se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=e.split("."),i=Object(z.a)(a,2),o=i[0],c=i[1],s=void 0===c?"":c,l="".concat(n?Ce(o):o,".").concat(s.slice(0,t)).replace(/\.$/,"");if(r&&0===Number(l)&&l.length>1){var d=l.lastIndexOf("0");l=l.slice(0,d)+l.slice(d).replace("0","1")}return l},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";if(!e)return t;var n=t.substring(0,t.length-e)||"0",r=t.substring(t.length-e).padStart(e,"0").substring(0,e);return"".concat(n,".").concat(r).replace(/\.?0+$/,"")},Fe=function(e){return e.slice(e.indexOf("@")+1,e.lastIndexOf("#"))},Ie=function(){var e=Object(g.a)(m.a.mark((function e(t,n,r,a,i,o,c){var s,l,d,u,p,f,b,h,x,j,g,y,O,v,C,S;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.tvl,d=l,u=Number(ke(24,n.shares_total_supply)),p=ke(24,null!==r&&void 0!==r?r:"0"),f={"usdc-aromankov.testnet":{price:1,decimals:18}}[t.reward_token],b=f&&f.price||0,h=null!==(s=ke(f.decimals,i))&&void 0!==s?s:"0",j=ke(24,x=null!==o&&void 0!==o?o:"0"),g=ye.pe(Oe.a("(".concat(t.reward_per_session," / ").concat(t.session_interval,") * 604800"))),y=Se(ke(f.decimals,new ve.BigNumber(g.toString()).toFixed()),2),O="0"!==x?ye.pe(Oe.a("".concat(g," * (").concat(null!==r&&void 0!==r?r:0," / ").concat(x,")"))):0,v=ke(f.decimals,O.toString()),C=new ve.BigNumber(j).multipliedBy(d).dividedBy(u).toNumber(),S=(S=0===C?"0":new ve.BigNumber(1).dividedBy(C).multipliedBy(new ve.BigNumber(y).multipliedBy(b)).multipliedBy(52).multipliedBy(100)).gt(100)?S.toFixed(0):S.toFixed(2),"Created"===t.farm_status&&(t.farm_status="Pending"),e.prev=18,!N.a.isSignedIn()){e.next=25;break}return e.next=22,Object(we.f)({farmId:t.farm_id});case 22:e.t0=e.sent,e.next=26;break;case 25:e.t0=0;case 26:e.t0>0&&(t.farm_status="InProgress"),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),console.log(e.t1);case 33:return e.abrupt("return",Object(w.a)(Object(w.a)({},t),{},{apr:S,lpTokenId:c,pool:n,rewardNumber:h,rewardToken:f,rewardsPerWeek:y,totalStaked:C,userRewardsPerWeek:v,userStaked:p}));case 34:case"end":return e.stop()}}),e,null,[[18,30]])})));return function(t,n,r,a,i,o,c){return e.apply(this,arguments)}}(),_e=n(28),Ae=n(90),De=_e.a.availableFarms,Ne=function(){var e=Object(g.a)(m.a.mark((function e(){var t,n,r,a,i,o,c,s,l,d,u,p,f,b,h,x,j,g,y,O;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(we.d)();case 2:return t=e.sent,e.next=5,Object(we.a)();case 5:if(n=e.sent,r=Ae.c.getAccountId(),a=r.split(".")[0],i="".concat(a,".").concat(_e.a.depositiumContractId),!N.a.isSignedIn()){e.next=15;break}return e.next=12,Object(we.c)({accountId:i});case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0={};case 16:if(o=e.t0,!N.a.isSignedIn()){e.next=23;break}return e.next=20,Object(we.e)({accountId:i});case 20:e.t1=e.sent,e.next=24;break;case 23:e.t1={};case 24:return c=e.t1,s={"usdc-aromankov.testnet":1,"wrap_near-aromankov.testnet":10.6},l=n.filter((function(e){return De.includes(e.farm_id)})),l.map((function(e){return Fe(e.farm_id)})),d={},e.next=31,Object(we.b)();case 31:if(u=e.sent)for(p=0;p<u.length;p++)f=u[p].token_account_ids[0],b=u[p].token_account_ids[1],h=new ve.BigNumber(u[p].amounts[0]).dividedBy(new ve.BigNumber(10).pow(18)).multipliedBy(s[f]),x=new ve.BigNumber(u[p].amounts[1]).dividedBy(new ve.BigNumber(10).pow(24)).multipliedBy(s[b]),d["".concat(_e.a.financeContractId,"@").concat(p,"#1")]={shares_total_supply:u[p].shares_total_supply,token_symbols:u[p].token_account_ids,tvl:h.plus(x).toFixed(0)};j=[],g=Object(ge.a)(l),e.prev=35,g.s();case 37:if((y=g.n()).done){e.next=46;break}return O=y.value,e.t2=j,e.next=42,Ie(O,d[O.farm_id],c[O.seed_id],s,o[O.reward_token],t[O.seed_id],Fe(O.farm_id));case 42:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 44:e.next=37;break;case 46:e.next=51;break;case 48:e.prev=48,e.t4=e.catch(35),g.e(e.t4);case 51:return e.prev=51,g.f(),e.finish(51);case 54:return e.abrupt("return",j);case 55:case"end":return e.stop()}}),e,null,[[35,48,51,54]])})));return function(){return e.apply(this,arguments)}}();var ze=function(e){return e.sort((function(e,t){return"active"===e.status?-1:1}))},Re=n(522),He=n(521),We=function(e){var t=e.token,n=e.style;return Object(r.useMemo)((function(){switch(t){case"REF":case"REF-NEAR":return Object(U.jsx)("img",{style:n,src:"./icons/ref.png",height:28,width:28});case"NEAR":return Object(U.jsx)("img",{style:n,src:"./icons/near.png",height:28,width:28});case"USDC":return Object(U.jsx)("img",{style:n,src:"./icons/usdc.svg",height:28,width:28});case"USDT":return Object(U.jsx)("img",{style:n,src:"./icons/usdt.png",height:28,width:28});case"Metapool stNEAR":return Object(U.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 67.79 67.79",width:"28",height:"28",version:"1.1",children:[Object(U.jsx)("path",{fill:"#fff",d:"M33.934.311a33.9 33.9 0 1 0 33.89 33.9 33.9 33.9 0 0 0-33.89-33.9z",id:"path505"}),Object(U.jsx)("path",{stroke:"none",fill:"#ffbd00",strokeWidth:"1px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeOpacity:1,fillOpacity:1,d:"m11.803 27.8 12.387.359 2.361 5.959 7.616 3.31 8.523-3.322 2.348-5.87 12.269.03L54.822 54.2 31.837 58.86 12.89 52.648z",id:"path1051"}),Object(U.jsx)("path",{stroke:"none",fill:"#a0a0ff",strokeWidth:"1px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeOpacity:1,fillOpacity:1,d:"m34.657 12.575-10.43 9.633 1.096 10.01 8.844 5.21 9.785-5.287 1.086-11.33z",id:"path1815"}),Object(U.jsx)("path",{id:"path928",fill:"#666",fillOpacity:1,d:"M33.928 4.282a29.93 29.93 0 0 1 4.682.367 29.93 29.93 0 0 1 25.244 29.572 29.93 29.93 0 0 1-29.92 29.92 29.93 29.93 0 0 1-.006-59.86zm.729 8.293c-2.03 5.668-8.815 9.76-8.815 14.521 0 4.76 3.912 8.62 8.737 8.62 4.824 0 8.736-3.86 8.736-8.62s-6.707-8.697-8.658-14.521zM37.84 22.67a2.524 2.446 0 0 1 .246.012 2.524 2.446 0 0 1 .246.035 2.524 2.446 0 0 1 .24.059 2.524 2.446 0 0 1 .233.08 2.524 2.446 0 0 1 .225.104 2.524 2.446 0 0 1 .213.123 2.524 2.446 0 0 1 .197.142 2.524 2.446 0 0 1 .183.162 2.524 2.446 0 0 1 .168.178 2.524 2.446 0 0 1 .147.191 2.524 2.446 0 0 1 .127.207 2.524 2.446 0 0 1 .105.217 2.524 2.446 0 0 1 .084.227 2.524 2.446 0 0 1 .06.232 2.524 2.446 0 0 1 .038.237 2.524 2.446 0 0 1 .012.24 2.524 2.446 0 0 1-.086.633 2.524 2.446 0 0 1-.252.59 2.524 2.446 0 0 1-.403.507 2.524 2.446 0 0 1-.521.389 2.524 2.446 0 0 1-.61.244 2.524 2.446 0 0 1-.652.084 2.524 2.446 0 0 1-.654-.084 2.524 2.446 0 0 1-.607-.244 2.524 2.446 0 0 1-.524-.389 2.524 2.446 0 0 1-.4-.508 2.524 2.446 0 0 1-.252-.59 2.524 2.446 0 0 1-.086-.632 2.524 2.446 0 0 1 .086-.633 2.524 2.446 0 0 1 .252-.59 2.524 2.446 0 0 1 .4-.506A2.524 2.446 0 0 1 36.58 23a2.524 2.446 0 0 1 .607-.247 2.524 2.446 0 0 1 .654-.082zM24.19 28.16a16.579 2.485 0 0 0-6.502 1.965 16.579 2.485 0 0 0 7.635 2.093 10.483 10.6 0 0 1-1.133-4.058zm20.848.078a10.483 10.6 0 0 1-1.086 3.904 16.579 2.485 0 0 0 6.894-2.017 16.579 2.485 0 0 0-5.808-1.887zm6.925 3.21c-.455 1.177-4.097 2.154-9.273 2.659a10.483 10.6 0 0 1-8.072 3.861 10.483 10.6 0 0 1-8.067-3.85c-5.276-.506-8.978-1.498-9.398-2.64h-.049v5.17h.049a.69.69 0 0 0-.049.24c0 1.8 7.81 3.25 17.43 3.25 9.62 0 17.43-1.45 17.43-3.25a.69.69 0 0 0 0-.24zm.032 7.323c-.67 1.73-8.22 3.03-17.43 3.03-9.23 0-16.771-1.34-17.381-3h-.049v5.17h.049a.69.69 0 0 0-.049.24c0 1.8 7.81 3.25 17.43 3.25 9.62 0 17.43-1.45 17.43-3.25a.69.69 0 0 0 0-.24zm0 7.21c-.67 1.69-8.22 3.03-17.43 3.03-9.23 0-16.771-1.34-17.381-3h-.049v5.17h.049a.69.69 0 0 0-.049.24c0 1.8 7.81 3.25 17.43 3.25 9.62 0 17.43-1.45 17.43-3.25a.69.69 0 0 0 0-.24z"})]});default:return Object(U.jsx)("img",{style:n,src:"",height:28,width:28})}}),[n,t])},Te=function(){return Object(U.jsx)("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(U.jsx)("path",{d:"M6.93754 0.889572H0.872005C0.4372 0.889572 0.0893555 1.27031 0.0893555 1.74623V10.2415C0.0893555 10.7174 0.4372 11.0981 0.872005 11.0981H6.94841C7.38321 11.0981 7.73106 10.7174 7.73106 10.2415V1.74623C7.72018 1.27031 7.37234 0.889572 6.93754 0.889572ZM2.66558 9.25393C2.66558 9.36101 2.57861 9.4562 2.48078 9.4562H1.50247C1.40464 9.4562 1.31768 9.36101 1.31768 9.25393V8.1831C1.31768 8.07602 1.40464 7.98083 1.50247 7.98083H2.48078C2.57861 7.98083 2.66558 8.07602 2.66558 8.1831V9.25393ZM2.66558 7.17176C2.66558 7.27885 2.57861 7.37403 2.48078 7.37403H1.50247C1.40464 7.37403 1.31768 7.27885 1.31768 7.17176V6.10094C1.31768 5.99385 1.40464 5.89867 1.50247 5.89867H2.48078C2.57861 5.89867 2.66558 5.99385 2.66558 6.10094V7.17176ZM4.57872 9.25393C4.57872 9.36101 4.49176 9.4562 4.39393 9.4562H3.41561C3.31778 9.4562 3.23082 9.36101 3.23082 9.25393V8.1831C3.23082 8.07602 3.31778 7.98083 3.41561 7.98083H4.39393C4.49176 7.98083 4.57872 8.07602 4.57872 8.1831V9.25393ZM4.57872 7.17176C4.57872 7.27885 4.49176 7.37403 4.39393 7.37403H3.41561C3.31778 7.37403 3.23082 7.27885 3.23082 7.17176V6.10094C3.23082 5.99385 3.31778 5.89867 3.41561 5.89867H4.39393C4.49176 5.89867 4.57872 5.99385 4.57872 6.10094V7.17176ZM6.49186 9.25393C6.49186 9.36101 6.4049 9.4562 6.30707 9.4562H5.32876C5.23093 9.4562 5.14397 9.36101 5.14397 9.25393V8.1831C5.14397 8.07602 5.23093 7.98083 5.32876 7.98083H6.30707C6.4049 7.98083 6.49186 8.07602 6.49186 8.1831V9.25393ZM6.49186 7.17176C6.49186 7.27885 6.4049 7.37403 6.30707 7.37403H5.32876C5.23093 7.37403 5.14397 7.27885 5.14397 7.17176V6.10094C5.14397 5.99385 5.23093 5.89867 5.32876 5.89867H6.30707C6.4049 5.89867 6.49186 5.99385 6.49186 6.10094V7.17176ZM6.85057 4.55418C6.85057 4.66127 6.76361 4.75645 6.66578 4.75645H1.14376C1.04593 4.75645 0.958966 4.66127 0.958966 4.55418V2.43632C0.958966 2.32924 1.04593 2.23406 1.14376 2.23406H6.67665C6.77448 2.23406 6.86144 2.32924 6.86144 2.43632V4.55418H6.85057Z",fill:"#0097A7"})})},Le=a.a.memo(Te),Ee=n(512),Be=function(e){var t=e.days,n=e.apr,a=e.amount,i=e.onDaysChange,o=Object(r.useCallback)((function(e,t){Number(t)&&i(t.toString())}),[i]),c=Object(r.useMemo)((function(){return Number(a)?(Number(a)*n*t/365/100*F.getState().balance.rate).toFixed(2):0}),[a,n,t]);return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:14,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:"Days"}),Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:14,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5,width:160},children:"Profit"})]}),Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsxs)("div",{style:{flexDirection:"column",flexGrow:1,marginRight:22},children:[Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:"26px",opacity:.3},children:"1"}),Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:"26px",opacity:.3},children:"90"})]}),Object(U.jsx)("div",{style:{marginLeft:4,marginRight:6},children:Object(U.jsx)(Ee.a,{defaultValue:1,onChange:o,min:1,max:90,size:"small",step:1,"aria-label":"Default",valueLabelDisplay:"auto"})})]}),Object(U.jsx)("div",{style:{backgroundColor:"#383838",border:"1px solid #413F3F",borderRadius:5,boxShadow:"inset 0px 4px 4px #383030",boxSizing:"border-box",display:"flex",height:33,justifyContent:"center",minWidth:160,paddingTop:4},children:Object(U.jsx)("div",{style:{color:"#FFFFFF",fontSize:12,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"$ ".concat(c)})})]})]})},Me=a.a.memo(Be),Ue=function(e){var t=e.amount,n=e.onAmountChange,a=e.errorMessage,i=Object(r.useCallback)((function(e){n(e.target.value)}),[n]),o=Object(r.useMemo)((function(){return Number(t)?(Number(t)*F.getState().balance.rate).toFixed(2):0}),[t]);return Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:14,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:"Deposit"}),Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("input",{value:t,onChange:i,style:{backgroundColor:"#FFFFFF",border:"1px solid #DDDDDD",borderRadius:5,boxSizing:"border-box",flexGrow:1,fontSize:12,fontStyle:"normal",fontWeight:"normal",height:33,lineHeight:"26px",maxLines:1,overflowX:"scroll",paddingLeft:14,paddingRight:14,resize:"none",whiteSpace:"nowrap"},placeholder:"NEAR"}),Object(U.jsx)("div",{style:{border:"1px solid #000000",margin:"0px 6px 0px 6px ",opacity:.2,width:13}}),Object(U.jsx)("div",{style:{backgroundColor:"#383838",border:"1px solid #413F3F",borderRadius:5,boxShadow:"inset 0px 4px 4px #383030",boxSizing:"border-box",display:"flex",height:33,justifyContent:"center",minWidth:160,paddingTop:4},children:Object(U.jsx)("div",{style:{color:"#FFFFFF",fontSize:12,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"$ ".concat(o)})})]}),a&&Object(U.jsx)("div",{style:{color:"red",fontSize:11,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:a})]})},Pe=a.a.memo(Ue),Ve=function(e){var t=e.pair,n=e.apr;return Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex"},children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{fontSize:20,fontStyle:"normal",fontWeight:500,lineHeight:"26px"},children:"".concat(t.first,"-").concat(t.second)}),Object(U.jsxs)("div",{style:{marginLeft:"24px"},children:[Object(U.jsx)(We,{token:t.first}),Object(U.jsx)(We,{style:{marginLeft:10,marginRight:32},token:t.second})]})]}),Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{border:"1px solid #000000",height:26,opacity:.2}}),Object(U.jsx)("div",{style:{display:"flex",fontSize:"20px",fontStyle:"normal",fontWeight:500,justifyContent:"center",lineHeight:"26px",minWidth:160},children:"APR: ".concat(n,"%")})]})]})},$e=a.a.memo(Ve),Ze=function(e){var t=e.token,n=e.apr;return Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",marginRight:20,width:180},children:[Object(U.jsx)("div",{style:{fontSize:20,fontStyle:"normal",fontWeight:500,lineHeight:"26px"},children:"".concat(t)}),Object(U.jsx)(We,{token:t})]}),Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{border:"1px solid #000000",height:26,opacity:.2}}),Object(U.jsx)("div",{style:{display:"flex",fontSize:"20px",fontStyle:"normal",fontWeight:500,justifyContent:"center",lineHeight:"26px",minWidth:160},children:"APR: ".concat(n,"%")})]})]})},qe=a.a.memo(Ze),Je=K.b().shape({amount:K.a().typeError("Invalid amount!").min(.01,"Too Short!").max(1e4,"Too Long!"),days:K.a().min(1,"Too Short!").max(90,"Too Long!")}),Ke=function(e){var t=e.strategy,n=e.onClose,i=e.onStartStrategy,o=Object(r.useCallback)((function(){switch(t._type){case"stake":return Object(U.jsx)(qe,{token:t.token,apr:t.apr});case"farm":return Object(U.jsx)($e,{pair:t.pair,apr:t.apr})}}),[t]),c=Object(r.useCallback)((function(e){var t=e.amount,n=e.strategyId;i(t,String(n))}),[i]);return Object(U.jsx)(a.a.Fragment,{children:Object(U.jsx)(J.b,{initialValues:{amount:"",strategyId:t.id,days:1},validationSchema:Je,onSubmit:c,children:function(e){var r=e.errors,a=(e.touched,e.values),i=e.handleChange,c=e.handleSubmit;return Object(U.jsxs)("div",{style:{backgroundColor:"#E9EDF0",border:"1px solid #E9EDF0",borderRadius:10,boxShadow:"0px 4px 10px rgba(204, 204, 204, 0.25)",boxSizing:"border-box",left:"50%",paddingBottom:26,paddingTop:28,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"auto"},children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",paddingLeft:39,paddingRight:18},children:[Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:20,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"Farming"}),Object(U.jsx)(L.a,{onClick:n,"aria-label":"delete",size:"small",children:Object(U.jsx)(Y,{})})]}),Object(U.jsx)("div",{style:{border:"1px solid #000000",margin:"10px 0px 20px 0px ",opacity:.2}}),Object(U.jsxs)(J.a,{children:[Object(U.jsxs)("div",{style:{paddingLeft:39,paddingRight:39},children:[o(),Object(U.jsx)(Ge,{}),Object(U.jsx)(Pe,{amount:a.amount,onAmountChange:i("amount"),errorMessage:r.amount}),Object(U.jsx)(Ge,{}),Object(U.jsx)(Me,{days:a.days,apr:Number(t.apr),amount:a.amount,onDaysChange:i("days")})]}),Object(U.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:26},children:"active"==t.status&&N.a.isSignedIn()&&Object(U.jsx)(Ye,{onClick:function(){return c()},children:"Start"})})]})]})}})})},Ge=function(){return Object(U.jsx)("div",{style:{border:"1px solid #000000",margin:"10px 0px 13px 0px ",opacity:.05}})},Ye=Object(Z.a)(q.a)({backgroundColor:"#0097A7",borderRadius:20,color:"#FFFFFF",fontSize:"12px",fontStyle:"normal",fontWeight:"bold",height:33,lineHeight:"26px",marginRight:"8px",padding:"6px",textTransform:"none",width:110}),Xe=a.a.memo(Ke),Qe=function(e){var t=e.strategy,n=e.onStartStrategy,a=Object(r.useState)(!1),i=Object(z.a)(a,2),o=i[0],c=i[1],s=Object(r.useCallback)((function(){c(!0)}),[]),l=Object(r.useCallback)((function(){c(!1)}),[]);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:"20px",fontStyle:"normal",fontWeight:"bold",lineHeight:"26px",marginLeft:"14px"},children:t.provider}),Object(U.jsx)(et,{onClick:s,variant:"text",startIcon:Object(U.jsx)(Le,{}),children:"Calculate"})]}),Object(U.jsx)("div",{style:{border:"1px solid #000000",margin:"10px 14px 30px 14px ",opacity:.1}}),Object(U.jsx)(ae.a,{open:o,onClose:l,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:Object(U.jsx)(Xe,{strategy:t,onClose:l,onStartStrategy:n})})]})},et=Object(Z.a)(q.a)({color:"#0097A7",fontSize:"12px",fontStyle:"normal",fontWeight:"bold",lineHeight:"26px",marginRight:"8px",padding:"6px",textTransform:"none"}),tt=a.a.memo(Qe),nt=function(e){var t=e.depositAmount,n=e.profitAmount;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{style:{border:"1px solid #000000",margin:"30px 14px 18px 14px ",opacity:.1}}),Object(U.jsx)(rt,{label:"Deposit",amount:t}),Object(U.jsx)(rt,{label:"Profit",amount:n})]})},rt=function(e){var t=e.label,n=e.amount,a=Object(r.useMemo)((function(){return Number(n)?(Number(n)*F.getState().balance.rate).toFixed(2):0}),[n]);return Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",marginLeft:14,marginRight:20,marginTop:12},children:[Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:20,fontStyle:"normal",fontWeight:"bold",lineHeight:"20px",opacity:.9},children:"".concat(t,":")}),Object(U.jsxs)("div",{style:{flexDirection:"column"},children:[Object(U.jsx)("div",{style:{fontSize:14,fontStyle:"normal",fontWeight:"bold",lineHeight:"20px",textAlign:"end",textTransform:"uppercase"},children:"".concat(n.toFixed(2)," NEAR")}),Object(U.jsx)("div",{style:{fontSize:12,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5,textAlign:"end"},children:"$".concat(a," USD")})]})]})},at=a.a.memo(nt),it=function(e){var t=e.farm,n=Object(r.useMemo)((function(){switch(t.status){case"in-progress":return"#00D254";case"active":return"#00ADD2";case"soon":return"#F0B622"}}),[t.status]),a=Object(c.b)(),i=Object(r.useCallback)((function(e,t){console.log("onStartStrategy ".concat(e," - ").concat(t)),a(h({amount:e,strategyId:t}))}),[a]);return Object(U.jsxs)(He.a,{sx:{borderBlock:"solid",borderColor:"#ECECEC",borderRadius:"10px",borderWidth:"1px",boxShadow:"0px 4px 20px rgba(103, 103, 103, 0.25)",mb:"26px",overflow:"hidden",position:"relative",width:"100%"},children:[Object(U.jsx)(D.a,{sx:{backgroundColor:n,height:"8px",width:"100%"}}),"soon"===t.status&&Object(U.jsx)("div",{style:{left:"50%",position:"absolute",top:0,transform:"translate(-50%)"},children:Object(U.jsx)("div",{style:{backgroundColor:"#F0B622",borderRadius:6,color:"#FFFFFF",fontSize:13,fontStyle:"normal",fontWeight:500,lineHeight:"26px",marginLeft:5,paddingLeft:8,paddingRight:8},children:"Coming soon"})}),Object(U.jsxs)(D.a,{sx:{pb:"34px",pt:"12px"},children:[Object(U.jsx)(tt,{strategy:t,onStartStrategy:i}),Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex"},children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",marginLeft:14,marginRight:20,width:200},children:[Object(U.jsx)("div",{style:{fontSize:20,fontStyle:"normal",fontWeight:500,lineHeight:"26px"},children:"".concat(t.pair.first,"-").concat(t.pair.second)}),Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:66},children:[Object(U.jsx)(We,{token:t.pair.first}),Object(U.jsx)(We,{token:t.pair.second})]})]}),Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{border:"1px solid #000000",height:26,opacity:.2}}),Object(U.jsx)("div",{style:{display:"flex",fontSize:"20px",fontStyle:"normal",fontWeight:500,justifyContent:"center",lineHeight:"26px",width:160},children:"APR: ".concat(t.apr,"%")})]})]}),Object(U.jsx)(at,{depositAmount:t.depositAmount,profitAmount:t.profitAmount})]})]})},ot=a.a.memo(it);var ct=function(e){var t=e.stake,n=Object(r.useMemo)((function(){switch(t.status){case"in-progress":return"#00D254";case"active":return"#00ADD2";case"soon":return"#F0B622"}}),[t.status]),a=Object(c.b)(),i=Object(r.useCallback)((function(e,t){a(h({amount:e,strategyId:t}))}),[a]);return Object(U.jsxs)(He.a,{sx:{borderBlock:"solid",borderColor:"#ECECEC",borderRadius:"10px",borderWidth:"1px",boxShadow:"0px 4px 20px rgba(103, 103, 103, 0.25)",mb:"26px",overflow:"hidden",width:"100%"},children:[Object(U.jsx)(D.a,{sx:{backgroundColor:n,height:"8px",width:"100%"}}),Object(U.jsxs)(D.a,{sx:{pb:"34px",pt:"12px"},children:[Object(U.jsx)(tt,{strategy:t,onStartStrategy:i}),Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex"},children:[Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",marginLeft:14,marginRight:20,width:200},children:[Object(U.jsx)("div",{style:{fontSize:20,fontStyle:"normal",fontWeight:500,lineHeight:"26px"},children:"".concat(t.token)}),Object(U.jsx)(We,{token:t.token})]}),Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(U.jsx)("div",{style:{border:"1px solid #000000",height:26,opacity:.2}}),Object(U.jsx)("div",{style:{display:"flex",fontSize:"20px",fontStyle:"normal",fontWeight:500,justifyContent:"center",lineHeight:"26px",width:160},children:"APR: ".concat(t.apr,"%")})]})]}),Object(U.jsx)(at,{depositAmount:t.depositAmount,profitAmount:t.profitAmount})]})]})},st=a.a.memo(ct),lt=function(){var e=function(){var e=Object(r.useState)([]),t=Object(z.a)(e,2),n=t[0],a=t[1],i=Object(r.useCallback)((function(e){console.log(e);var t,n=_e.a.activeFarms;return t="InProgress"===e.farm_status?"in-progress":n.includes(e.farm_id)?"active":"soon",{_type:"farm",apr:e.apr,depositAmount:15,id:e.farm_id,pair:{first:e.pool.token_symbols[0].split("-")[0].replace("wrap_","").toUpperCase(),second:e.pool.token_symbols[1].split("-")[0].replace("wrap_","").toUpperCase()},profitAmount:3,provider:"REF Farming",status:t}}),[]);return Object(r.useEffect)((function(){function e(){return(e=Object(g.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:t=e.sent,a(ze(t.map(i)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===n.length&&function(){e.apply(this,arguments)}()}),[n,i]),{farms:n}}(),t=e.farms,n=function(){var e=Object(r.useState)([{_type:"stake",apr:"10.5",depositAmount:12,id:1,profitAmount:9,provider:"Staking",status:"soon",token:"Metapool stNEAR"},{_type:"stake",apr:"50.34",depositAmount:7,id:2,profitAmount:3,provider:"REF Farming",status:"soon",token:"REF-NEAR"}]),t=Object(z.a)(e,2),n=t[0];return t[1],{stakes:n}}(),a=n.stakes,i=Object(r.useCallback)((function(e){switch(e._type){case"stake":return Object(U.jsx)(st,{stake:e});case"farm":return Object(U.jsx)(ot,{farm:e})}}),[]);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:23},children:[Object(U.jsx)(dt,{color:"#00D254",label:"In progress"}),Object(U.jsx)(dt,{color:"#00ADD2",label:"Active"}),Object(U.jsx)(dt,{color:"#F0B622",label:"Coming soon"})]}),t.length>0?Object(U.jsx)(D.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",mb:2.5,mx:2.5},children:[].concat(Object(me.a)(t),Object(me.a)(a)).map((function(e,t){return Object(U.jsx)(D.a,{sx:{mx:2.5},children:i(e)},e.id)}))}):Object(U.jsx)("div",{style:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center"},children:Object(U.jsx)(Re.a,{color:"success"})})]})},dt=function(e){var t=e.color,n=e.label;return Object(U.jsxs)("div",{style:{alignItems:"center",display:"flex",margin:"20px 18px 0px 18px"},children:[Object(U.jsx)("div",{style:{backgroundColor:t,borderRadius:10,height:15,width:15}}),Object(U.jsx)("div",{style:{color:"#2D2D2D",fontSize:11,fontStyle:"normal",fontWeight:500,lineHeight:"26px",marginLeft:5,opacity:.4},children:" - ".concat(n)})]})},ut=a.a.memo(lt),pt=Object(_.a)({palette:{primary:{contrastText:"#000",dark:"#808e95",light:"#e2f1f8",main:"#B0BEC5"},secondary:{contrastText:"#000",dark:"#009faf",light:"#88ffff",main:"#4DD0E1"}}}),ft=function(){return Object(U.jsxs)(D.a,{sx:{borderRadius:"10px",display:"grid",gridArea:"page",gridTemplateAreas:'"balance strategies"',gridTemplateColumns:"3fr 8fr",height:"100%",overflow:"hidden",width:"100%"},children:[Object(U.jsx)(D.a,{sx:{gridArea:"balance"},children:Object(U.jsx)(je,{})}),Object(U.jsx)(D.a,{sx:{backgroundColor:"#F8F8F8",gridArea:"strategies",height:"auto",maxHeight:"100%",overflowY:"auto"},children:Object(U.jsx)(ut,{})})]})},bt=function(){return Object(U.jsx)(D.a,{sx:{backgroundColor:"#F8F8F8",borderRadius:"10px",gridArea:"page",height:"100%",minHeight:"100%",overflow:"hidden",overflowY:"auto",width:"100%"},children:Object(U.jsx)(ut,{})})},ht=function(){return Object(U.jsx)(A.a,{theme:pt,children:Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(I.a,{}),Object(U.jsxs)(D.a,{sx:{display:"grid",gridTemplateAreas:'"header header"\n          "page page"',gridTemplateRows:"1fr 6fr",height:"100%",pb:10,px:10,width:"100%"},children:[Object(U.jsx)(D.a,{sx:{gridArea:"header"},children:Object(U.jsx)(pe,{})}),N.a.isSignedIn()?Object(U.jsx)(ft,{}):Object(U.jsx)(bt,{})]})]})})},xt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,523)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};o.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(c.a,{store:F,children:Object(U.jsx)(ht,{})})}),document.getElementById("root")),xt()},52:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return b}));var r=n(12),a=n.n(r),i=n(27),o=n(61),c=n(54),s=n(90),l=n(28),d=new c.Near(Object(o.a)({keyStore:new c.keyStores.InMemoryKeyStore},{explorerUrl:"https://explorer.testnet.near.org",helperUrl:"https://helper.testnet.near.org",networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org"})),u=new c.Near(Object(o.a)({keyStore:new c.keyStores.InMemoryKeyStore},{explorerUrl:"https://explorer.mainnet.near.org",helperUrl:"https://helper.mainnet.near.org",networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",walletUrl:"https://wallet.mainnet.near.org"})),p=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],e.next=4,Object(s.b)(l.a.wrapNearContractId);case 4:return(i=e.sent)&&"0"!==i.total||r.push({amount:"0.00125",args:{},gas:"30000000000000",methodName:"storage_deposit"}),r.push({amount:t,args:{},gas:"50000000000000",methodName:"near_deposit"}),r.push({amount:"0.000000000000000000000001",args:{amount:c.utils.format.parseNearAmount(t),msg:"",receiver_id:l.a.depositiumContractId},gas:"50000000000000",methodName:"ft_transfer_call"}),n.push({functionCalls:r,receiverId:l.a.wrapNearContractId}),e.abrupt("return",Object(s.a)(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],console.log("startStrategy",t),r=s.c.getAccountId(),i=r.split(".")[0],o="".concat(i,".").concat(l.a.depositiumContractId),n.push({functionCalls:[{amount:"4",args:{accound_sub_id:i},gas:"300000000000000",methodName:"create"}],receiverId:l.a.depositiumContractId}),n.push({functionCalls:[{amount:"0.1",args:{account_id:o},gas:"300000000000000",methodName:"storage_deposit"}],receiverId:l.a.wrapNearContractId}),n.push({functionCalls:[{methodName:"storage_deposit",args:{account_id:o},amount:"0.1",gas:"300000000000000"}],receiverId:l.a.farmingContractId}),n.push({functionCalls:[{args:{},gas:"300000000000000",methodName:"init"}],receiverId:o}),n.push({functionCalls:[{args:{account_id:r,sub_account_id:o,amount:c.utils.format.parseNearAmount(t)},gas:"300000000000000",methodName:"start_strategy"}],receiverId:l.a.depositiumContractId}),e.abrupt("return",Object(s.a)(n));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://helper.testnet.near.org/fiat",{headers:{"Content-type":"application/json; charset=UTF-8"},method:"GET"}).then((function(e){return e.json()})).catch((function(){return{near:{cny:66.36,eur:8.98,last_updated_at:1636159198,usd:10.37}}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},90:function(e,t,n){"use strict";n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return w}));var r=n(12),a=n.n(r),i=n(27),o=n(31),c=n(32),s=n(45),l=n(46),d=n(61),u=n(60),p=n.n(u),f=n(87),b=n(54),h=n(96),x=n(143),j=n(28),m=new b.Near(Object(d.a)({keyStore:new b.keyStores.InMemoryKeyStore},j.a)),g=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"_checkConnectedAccount",value:function(){this._connectedAccount||(this._connectedAccount=new C(this,this._near.connection,this._authData.accountId))}},{key:"account",value:function(){return this._checkConnectedAccount(),this._connectedAccount}},{key:"createTransaction",value:function(e){var t=e.receiverId,n=e.actions,r=e.nonceOffset,a=void 0===r?1:r;return this._checkConnectedAccount(),this._connectedAccount.createTransaction({receiverId:t,actions:n,nonceOffset:a})}}]),n}(b.WalletConnection),y=new g(m,j.a.depositiumContractId),O=function(e,t){var n=t.methodName,r=t.args;return y.account().viewFunction(e,n,r)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.getAccountId();return O(e,{args:{account_id:t},methodName:"storage_balance_of"})},w=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e,t){return y.createTransaction({actions:e.functionCalls.map((function(e){return Object(h.functionCall)(e.methodName,e.args,(n=e.gas)?new p.a(n):new p.a("100000000000000"),(t=e.amount)?new p.a(b.utils.format.parseNearAmount(t)):new p.a("0"));var t,n})),nonceOffset:t+1,receiverId:e.receiverId})})));case 2:return r=e.sent,e.abrupt("return",y.requestSignTransactions(r,n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"sendTransactionWithActions",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signAndSendTransaction(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createTransaction",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o,c,s,l,d,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.receiverId,r=t.actions,i=t.nonceOffset,o=void 0===i?1:i,e.next=3,this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);case 3:return c=e.sent,e.next=6,this.accessKeyForTransaction(n,r,c);case 6:if(s=e.sent){e.next=9;break}throw new Error("Cannot find matching key for transaction sent to ".concat(n));case 9:return e.next=11,this.connection.provider.block({finality:"final"});case 11:return l=e.sent,d=Object(f.baseDecode)(l.header.hash),u=x.PublicKey.from(s.public_key),p=s.access_key.nonce+o,e.abrupt("return",Object(h.createTransaction)(this.accountId,u,n,p,r,d));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b.ConnectedWalletAccount)},92:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return h}));var r=n(12),a=n.n(r),i=n(27),o=n(52),c=n(36),s=n(28),l=function(t){var n=t.methodName,r=t.args,a=void 0===r?{}:r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.farmingContractId;return o.c.connection.provider.query({account_id:i,args_base64:e.from(JSON.stringify(a)).toString("base64"),finality:"final",method_name:n,request_type:"call_function"}).then((function(t){var n=t.result;return JSON.parse(e.from(n).toString())}))},d=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({args:{from_index:0,limit:100},methodName:"list_seeds"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({args:{from_index:0,limit:100},methodName:"list_farms"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({args:{from_index:0,limit:100},methodName:"get_pools"},s.a.financeContractId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.accountId,r=void 0===n?c.a.getAccountId():n,e.abrupt("return",l({args:{account_id:r},methodName:"list_rewards"},s.a.farmingContractId));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.accountId,r=void 0===n?c.a.getAccountId():n,e.next=3,l({args:{account_id:r},methodName:"list_user_seeds"},s.a.farmingContractId);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.farmId,r=t.accountId,i=void 0===r?c.a.getAccountId():r,e.next=3,l({args:{account_id:i,farm_id:n},methodName:"get_user_rps"},s.a.financeContractId);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(65).Buffer)}},[[453,1,2]]]);
//# sourceMappingURL=main.a78c2ab3.chunk.js.map