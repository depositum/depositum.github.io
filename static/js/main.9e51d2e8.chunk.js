(this["webpackJsonpdepositium-ui"]=this["webpackJsonpdepositium-ui"]||[]).push([[0],{229:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var r=n(12),a=n.n(r),i=n(27),o=n(41),c=n.n(o),s=n(52),l=n(28),d=function(e){var n=e.methodName,r=e.args,a=void 0===r?{}:r;return s.c.connection.provider.query({account_id:l.a.financeContractId,args_base64:t.from(JSON.stringify(a)).toString("base64"),finality:"final",method_name:n,request_type:"call_function"}).then((function(e){var n=e.result;return JSON.parse(t.from(n).toString())}))};function u(){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(a.a.mark((function t(){var e,n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({args:{pool_id:7},methodName:"get_pool"});case 2:return e=t.sent,n=new c.a(e.amounts[0]).div(c.a.pow(10,6)),r=new c.a(e.amounts[1]).div(c.a.pow(10,24)),i=n.div(r),t.abrupt("return",new c.a(i.toFixed(10)));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,n(65).Buffer)},241:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return h}));var r=n(15),a=n(35),i=n(12),o=n.n(i),c=n(27),s=n(41),l=n.n(s),d=n(52),u=n(28),p=n(36),f=function(e){var n=e.contractId,r=e.methodName,a=e.args,i=void 0===a?{}:a,o=d.c;return n===u.a.financeContractId&&(o=d.b),o.connection.provider.query({account_id:n,args_base64:t.from(JSON.stringify(i)).toString("base64"),finality:"final",method_name:r,request_type:"call_function"}).then((function(e){var n=e.result;return JSON.parse(t.from(n).toString())}))};function h(){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(o.a.mark((function t(){var e,n,i,c,s,d,h,b,x;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetch balance from contract",u.a.depositiumContractId),t.next=3,p.a.account();case 3:return n=t.sent,t.next=6,f({args:{account_id:n.accountId},contractId:u.a.depositiumContractId,methodName:"balance_of"});case 6:i=t.sent,c={},console.log("balances res",i),s=Object(a.a)(i);try{for(s.s();!(d=s.n()).done;)h=Object(r.a)(d.value,2),b=h[0],x=h[1],c[b]=new l.a(x).div(l.a.pow(10,24)).toFixed(2)}catch(o){s.e(o)}finally{s.f()}return console.log("balances",c),t.abrupt("return",null!==(e=c["wrap_near-aromankov.testnet"])&&void 0!==e?e:0);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,n(65).Buffer)},28:function(t,e,n){"use strict";e.a={depositiumContractId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK_ID:"TESTNET",REACT_APP_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_HELPER_URL:"https://helper.testnet.mainnet.near.org",REACT_APP_EXPLORER_URL:"https://explorer.testnet.mainnet.near.org",REACT_APP_INDEXER_URL:"https://testnet-indexer.ref-finance.com"}).REACT_APP_DEPOSITIUM_CONTRACT_ID,explorerUrl:"https://explorer.testnet.mainnet.near.org",helperUrl:"https://helper.testnet.mainnet.near.org",indexerUrl:"https://testnet-indexer.ref-finance.com",networkId:"TESTNET",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",wrapNearContractId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK_ID:"TESTNET",REACT_APP_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_HELPER_URL:"https://helper.testnet.mainnet.near.org",REACT_APP_EXPLORER_URL:"https://explorer.testnet.mainnet.near.org",REACT_APP_INDEXER_URL:"https://testnet-indexer.ref-finance.com"}).REACT_APP_WRAP_NEAR_CONTRACT_ID,financeContractId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK_ID:"TESTNET",REACT_APP_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_HELPER_URL:"https://helper.testnet.mainnet.near.org",REACT_APP_EXPLORER_URL:"https://explorer.testnet.mainnet.near.org",REACT_APP_INDEXER_URL:"https://testnet-indexer.ref-finance.com"}).REACT_APP_REF_FINANCE_CONTRACT_ID,farmingContractId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK_ID:"TESTNET",REACT_APP_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_HELPER_URL:"https://helper.testnet.mainnet.near.org",REACT_APP_EXPLORER_URL:"https://explorer.testnet.mainnet.near.org",REACT_APP_INDEXER_URL:"https://testnet-indexer.ref-finance.com"}).REACT_APP_FARMING_CONTRACT_ID,activeFarms:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK_ID:"TESTNET",REACT_APP_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_HELPER_URL:"https://helper.testnet.mainnet.near.org",REACT_APP_EXPLORER_URL:"https://explorer.testnet.mainnet.near.org",REACT_APP_INDEXER_URL:"https://testnet-indexer.ref-finance.com"}).REACT_APP_ACTIVE_FARMS.split(","),availableFarms:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK_ID:"TESTNET",REACT_APP_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_HELPER_URL:"https://helper.testnet.mainnet.near.org",REACT_APP_EXPLORER_URL:"https://explorer.testnet.mainnet.near.org",REACT_APP_INDEXER_URL:"https://testnet-indexer.ref-finance.com"}).REACT_APP_AVAILABLE_FARMS.split(",")}},285:function(t,e){},294:function(t,e){},338:function(t,e,n){},339:function(t,e,n){},340:function(t,e,n){},36:function(t,e,n){"use strict";var r=n(52),a=n(54),i=n(28),o=new a.WalletConnection(r.c,i.a.depositiumContractId);e.a=o},452:function(t,e){},453:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(72),o=n.n(i),c=n(110),s=n(63),l=n(41),d=n.n(l),u=n(52),p=function(t,e,n){if(!t||!e||!n)return"0";try{new d.a(n)}catch(r){return"0"}return new d.a(t).div(100).div("365").times(e).times(n).toFixed(2)},f=Object(s.d)({initialState:{f_ref_near:{apr:54.3,days:30,depositAmount:"",depositAmountUSD:0,profit:0,profitUSD:0},f_usdt_near:{apr:94.3,days:30,depositAmount:"",depositAmountUSD:0,profit:0,profitUSD:0}},name:"strategyItem",reducers:{changeDays:function(t,e){var n=e.payload,r=n.value,a=t[n.strategyId];a.days=r,a.profit=p(a.apr,a.days,a.depositAmount)},changeDepositAmount:function(t,e){var n=e.payload,r=n.value,a=t[n.strategyId];a.depositAmount=r,a.profit=p(a.apr,a.days,a.depositAmount)},startStrategy:function(t,e){var n=e.payload,r=n.strategyId,a=n.amount;console.log("start strategy",r),Object(u.d)(a).then((function(t){console.log("start strategy res:",t)})).catch((function(t){return console.log("startStrategy err",t)}))}}}),h=f.actions,b=(h.changeDepositAmount,h.changeDays,h.startStrategy),x=f.reducer,j=n(12),m=n.n(j),g=n(27),O=n(229),y=Object(s.c)("prices/fetchPrices",Object(g.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Fetching the prices"),t.next=3,Object(O.a)();case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})))),v=Object(s.d)({extraReducers:function(t){t.addCase(y.pending,(function(t){t.status="loading"})).addCase(y.fulfilled,(function(t,e){t.status="idle",console.log("action.payload",e.payload),t.nearPrice=e.payload}))},initialState:{nearPrice:0},name:"prices"}).reducer,_=n(61),C=Object(s.b)("Balance/updateBalance",(function(t){return{payload:t}})),S=Object(s.b)("Balance/updateRate",(function(t){return{payload:t}})),E=Object(s.d)({extraReducers:function(t){t.addCase(C,(function(t,e){return Object(_.a)(Object(_.a)({},t),{},{balance:e.payload})})).addCase(S,(function(t,e){return Object(_.a)(Object(_.a)({},t),{},{rate:e.payload})}))},initialState:{balance:0,rate:0},name:"Balance",reducers:{}}).reducer,w=Object(s.a)({reducer:{balance:E,prices:v,strategyItem:x}}),A=(n(338),n(339),n(517)),R=n(256),T=n(514),k=n(515),P=(n(340),n(36)),F=n(15),I=n(516),D=n(511),L=n(513),N=n(505),W=n(518),H=n(508),U=n(240),z=n.n(U),B=n(4),M=function(){return Object(B.jsx)("svg",{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(B.jsx)("path",{d:"M1.00012 1L5.92941 5.92929C5.96846 5.96834 6.03178 5.96834 6.07083 5.92929L11.0001 1",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})})},K=a.a.memo(M),V=n(500),X=n(17),$=n(519),Z=n(112),q=n(101),J=function(){return Object(B.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(B.jsx)("path",{d:"M2.24921 0.594416L2.34421 0.678302L6.62268 4.95693L10.9012 0.678302C11.295 0.284479 11.9335 0.284479 12.3273 0.678302C12.6908 1.04183 12.7188 1.61386 12.4112 2.00946L12.3273 2.10446L8.04868 6.38294L12.3273 10.6614C12.7211 11.0552 12.7211 11.6938 12.3273 12.0876C11.9638 12.4511 11.3918 12.4791 10.9962 12.1715L10.9012 12.0876L6.62268 7.80894L2.34421 12.0876C1.95039 12.4814 1.31187 12.4814 0.918049 12.0876C0.55452 11.724 0.526555 11.152 0.834156 10.7564L0.918049 10.6614L5.19669 6.38294L0.918049 2.10446C0.524226 1.71064 0.524226 1.07212 0.918049 0.678302C1.28158 0.314773 1.85361 0.286815 2.24921 0.594416Z",fill:"black"})})},G=a.a.memo(J),Y=function(t){var e=t.amount,n=t.onAmountChange,a=t.errorMessage,i=Object(r.useCallback)((function(t){n(t.target.value)}),[n]),o=Object(r.useMemo)((function(){return void 0===a&&Number(e)?(Number(e)*w.getState().balance.rate).toFixed(2):0}),[e,a]);return Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("input",{value:e,onChange:i,style:{backgroundColor:"#FFFFFF",border:"1px solid #DDDDDD",borderRadius:5,boxSizing:"border-box",flexGrow:1,fontSize:12,fontStyle:"normal",fontWeight:"normal",height:33,lineHeight:"26px",maxLines:1,overflowX:"scroll",paddingLeft:14,paddingRight:14,resize:"none",whiteSpace:"nowrap"},placeholder:"NEAR"}),Object(B.jsx)("div",{style:{border:"1px solid #000000",margin:"0px 6px 0px 6px ",opacity:.2,width:13}}),Object(B.jsx)("div",{style:{backgroundColor:"#383838",border:"1px solid #413F3F",borderRadius:5,boxShadow:"inset 0px 4px 4px #383030",boxSizing:"border-box",display:"flex",height:33,justifyContent:"center",minWidth:160,paddingTop:4},children:Object(B.jsx)("div",{style:{color:"#FFFFFF",fontSize:12,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"$ ".concat(o)})})]}),Object(B.jsx)("div",{style:{height:12},children:Object(B.jsx)("div",{style:{color:"red",fontSize:11,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:a})})]})},Q=a.a.memo(Y),tt=q.b().shape({amount:q.a().typeError("Invalid amount!").min(10,"Min amount is 10!").max(1e4,"Max amount is 10000!")}),et=function(t){var e=t.onClose,n=t.onDeposit,i=Object(r.useCallback)((function(t){var e=t.amount;n(e)}),[n]);return Object(B.jsx)(a.a.Fragment,{children:Object(B.jsx)(Z.b,{initialValues:{amount:""},validationSchema:tt,onSubmit:i,children:function(t){var n=t.errors,r=(t.touched,t.values),a=t.handleChange,i=t.handleSubmit;return Object(B.jsxs)("div",{style:{backgroundColor:"#E9EDF0",border:"1px solid #E9EDF0",borderRadius:10,boxShadow:"0px 4px 10px rgba(204, 204, 204, 0.25)",boxSizing:"border-box",left:"50%",paddingBottom:26,paddingTop:28,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"auto"},children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",paddingLeft:39,paddingRight:18},children:[Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:20,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"Deposit NEAR"}),Object(B.jsx)(W.a,{onClick:e,"aria-label":"delete",size:"small",children:Object(B.jsx)(G,{})})]}),Object(B.jsx)("div",{style:{border:"1px solid #000000",margin:"10px 0px 20px 0px ",opacity:.2}}),Object(B.jsxs)(Z.a,{children:[Object(B.jsx)("div",{style:{paddingLeft:39,paddingRight:39},children:Object(B.jsx)(Q,{amount:r.amount,onAmountChange:a("amount"),errorMessage:n.amount})}),Object(B.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:14},children:Object(B.jsx)(nt,{disabled:void 0!==n.amount&&0===r.amount.length,onClick:function(){return i()},children:"Deposit"})})]})]})}})})},nt=Object(X.a)($.a)({backgroundColor:"#0097A7",borderRadius:20,color:"#FFFFFF",fontSize:"12px",fontStyle:"normal",fontWeight:"bold",height:33,lineHeight:"26px",marginRight:"8px",padding:"6px",textTransform:"none",width:110}),rt=a.a.memo(et),at=n(509),it=function(){var t=Object(r.useState)(!1),e=Object(F.a)(t,2),n=e[0],a=e[1],i=Object(r.useCallback)((function(){a(!0)}),[]),o=Object(r.useCallback)((function(){a(!1)}),[]),c=Object(r.useCallback)(function(){var t=Object(g.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.e)(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]),s=r.useState(null),l=Object(F.a)(s,2),d=l[0],p=l[1],f=Boolean(d),h=Object(r.useCallback)((function(t){p(t.currentTarget)}),[]),b=Object(r.useCallback)((function(){p(null)}),[]),x=Object(r.useCallback)((function(){P.a.signOut(),window.location.reload()}),[]);return Object(B.jsxs)(r.Fragment,{children:[Object(B.jsxs)(k.a,{sx:{alignItems:"center",display:"flex",textAlign:"center"},children:[Object(B.jsx)(ot,{onClick:i,variant:"text",startIcon:Object(B.jsx)(V.a,{fontSize:"small"}),children:"Deposit"}),Object(B.jsx)("div",{style:{border:"1px solid #CADEEF",height:32,marginLeft:24,marginRight:20}}),Object(B.jsx)("div",{style:{color:"#FFFFFF",fontSize:14,fontStyle:"normal",fontWeight:600,letterSpacing:"0.2px",lineHeight:"20px",marginLeft:5},children:P.a.account().accountId}),Object(B.jsx)(H.a,{title:"Account settings",children:Object(B.jsxs)(W.a,{onClick:h,size:"small",sx:{ml:2},children:[Object(B.jsx)(I.a,{sx:{height:44,marginRight:"11px",width:44},children:P.a.account().accountId[0]}),Object(B.jsx)(K,{})]})})]}),Object(B.jsx)(D.a,{anchorEl:d,open:f,onClose:b,onClick:b,PaperProps:{elevation:0,sx:{"& .MuiAvatar-root":{height:32,ml:-.5,mr:1,width:32},"&:before":{bgcolor:"background.paper",content:'""',display:"block",height:10,position:"absolute",right:14,top:0,transform:"translateY(-50%) rotate(45deg)",width:10,zIndex:0},filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,overflow:"visible"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:Object(B.jsxs)(L.a,{onClick:x,children:[Object(B.jsx)(N.a,{children:Object(B.jsx)(z.a,{fontSize:"small"})}),"Logout"]})}),Object(B.jsx)(at.a,{open:n,onClose:o,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:Object(B.jsx)(rt,{onDeposit:c,onClose:o})})]})},ot=Object(X.a)($.a)({color:"#FFFFFF",fontSize:14,fontStyle:"normal",fontWeight:600,letterSpacing:"0.2px",lineHeight:"20px",padding:"6px",textTransform:"none"}),ct=r.memo(it),st=function(){var t=Object(r.useCallback)((function(){P.a.requestSignIn()}),[]);return Object(B.jsx)(lt,{variant:"contained",endIcon:Object(B.jsx)("img",{src:"./icons/near.png",height:24,width:24}),onClick:t,children:"Connect NEAR"})},lt=Object(X.a)($.a)({backgroundColor:"#FFFFFF",padding:"6px 12px 6px 12px",textTransform:"none"}),dt=a.a.memo(st),ut=function(){return Object(B.jsxs)("div",{className:"Header",children:[Object(B.jsx)("div",{style:{color:"#FFFFFF",fontSize:"36px",fontStyle:"normal",fontWeight:"bold",lineHeight:"26px",opacity:.3},children:"Depositium"}),Object(B.jsx)(k.a,{children:P.a.isSignedIn()?Object(B.jsx)(ct,{}):Object(B.jsx)(dt,{})})]})},pt=a.a.memo(ut),ft=n(241);var ht=function(){return Object(B.jsx)(k.a,{sx:{backgroundColor:"#0097A7",height:"100%",px:5,py:8},children:Object(B.jsx)(bt,{})})},bt=function(){var t=function(){var t=Object(r.useState)("~"),e=Object(F.a)(t,2),n=e[0],a=e[1],i=Object(r.useState)("~"),o=Object(F.a)(i,2),c=o[0],s=o[1],l=Object(r.useState)("~"),p=Object(F.a)(l,2),f=p[0],h=p[1];return Object(r.useEffect)((function(){function t(){return t=Object(g.a)(m.a.mark((function t(){var e,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ft.a)();case 2:return n=t.sent,a(n),w.dispatch(C(null!==(e=Number(n))&&void 0!==e?e:0)),t.next=7,Object(u.a)();case 7:r=t.sent,s(r.near.usd),h(new d.a(r.near.usd).times(n).toFixed(2)),w.dispatch(S(r.near.usd));case 11:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),{balance:n,fiatAmount:f,rate:c}}(),e=t.balance,n=t.rate,a=t.fiatAmount;return Object(B.jsxs)("div",{style:{alignItems:"center",backgroundColor:"#F8F8F8",borderRadius:10,display:"flex",paddingLeft:19,paddingRight:21},children:[Object(B.jsx)(xt,{token:"NEAR",style:{height:38,marginBottom:19,marginTop:17,width:38}}),Object(B.jsxs)("div",{style:{marginBottom:12,marginLeft:12,marginTop:19,width:"100%"},children:[Object(B.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{fontSize:16,fontStyle:"normal",fontWeight:"bold",lineHeight:"20px",textTransform:"uppercase"},children:"Near"}),Object(B.jsx)("div",{style:{fontSize:14,fontStyle:"normal",fontWeight:"bold",lineHeight:"20px",textTransform:"uppercase"},children:"".concat(e," NEAR")})]}),Object(B.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{fontSize:12,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:"$ ".concat(n)}),Object(B.jsx)("div",{style:{fontSize:12,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:"$".concat(a," USD")})]})]})]})},xt=function(t){var e=t.token,n=t.style,a=Object(r.useMemo)((function(){switch(e){case"REF":return"./icons/ref.png";case"NEAR":return"./icons/near.png";case"USDT":return"./icons/usdt.png"}}),[e]);return Object(B.jsx)("img",{style:n,src:a,height:"24px",width:"24px"})},jt=a.a.memo(ht),mt=n(22),gt=n(35),Ot=n(3),yt=n(507),vt=n(71),_t=n(92);function Ct(t){for(var e=/(-?\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t}var St=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t.split("."),i=Object(F.a)(a,2),o=i[0],c=i[1],s=void 0===c?"":c,l="".concat(n?Ct(o):o,".").concat(s.slice(0,e)).replace(/\.$/,"");if(r&&0===Number(l)&&l.length>1){var d=l.lastIndexOf("0");l=l.slice(0,d)+l.slice(d).replace("0","1")}return l},Et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";if(!t)return e;var n=e.substring(0,e.length-t)||"0",r=e.substring(e.length-t).padStart(t,"0").substring(0,t);return"".concat(n,".").concat(r).replace(/\.?0+$/,"")},wt=function(t){return t.slice(t.indexOf("@")+1,t.lastIndexOf("#"))},At=function(){var t=Object(g.a)(m.a.mark((function t(e,n,r,a,i,o,c){var s,l,d,u,p,f,h,b,x,j,g,O,y,v,C,S;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=n.tvl,d=l,u=Number(Et(24,n.shares_total_supply)),p=Et(24,null!==r&&void 0!==r?r:"0"),f={"usdc-aromankov.testnet":{price:1,decimals:18}}[e.reward_token],h=f&&f.price||0,b=null!==(s=Et(f.decimals,i))&&void 0!==s?s:"0",j=Et(24,x=null!==o&&void 0!==o?o:"0"),g=Ot.pe(yt.a("(".concat(e.reward_per_session," / ").concat(e.session_interval,") * 604800"))),O=St(Et(f.decimals,new vt.BigNumber(g.toString()).toFixed()),2),y="0"!==x?Ot.pe(yt.a("".concat(g," * (").concat(null!==r&&void 0!==r?r:0," / ").concat(x,")"))):0,v=Et(f.decimals,y.toString()),C=new vt.BigNumber(j).multipliedBy(d).dividedBy(u).toNumber(),S=(S=0===C?"0":new vt.BigNumber(1).dividedBy(C).multipliedBy(new vt.BigNumber(O).multipliedBy(h)).multipliedBy(52).multipliedBy(100)).gt(100)?S.toFixed(0):S.toFixed(2),"Created"===e.farm_status&&(e.farm_status="Pending"),t.prev=18,!P.a.isSignedIn()){t.next=25;break}return t.next=22,Object(_t.f)({farmId:e.farm_id});case 22:t.t0=t.sent,t.next=26;break;case 25:t.t0=0;case 26:t.t0>0&&(e.farm_status="InProgress"),t.next=33;break;case 30:t.prev=30,t.t1=t.catch(18),console.log(t.t1);case 33:return t.abrupt("return",Object(_.a)(Object(_.a)({},e),{},{apr:S,lpTokenId:c,pool:n,rewardNumber:b,rewardToken:f,rewardsPerWeek:O,totalStaked:C,userRewardsPerWeek:v,userStaked:p}));case 34:case"end":return t.stop()}}),t,null,[[18,30]])})));return function(e,n,r,a,i,o,c){return t.apply(this,arguments)}}(),Rt=n(28),Tt=n(90),kt=Rt.a.availableFarms,Pt=function(){var t=Object(g.a)(m.a.mark((function t(){var e,n,r,a,i,o,c,s,l,d,u,p,f,h,b,x,j,g,O,y;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_t.d)();case 2:return e=t.sent,t.next=5,Object(_t.a)();case 5:if(n=t.sent,r=Tt.c.getAccountId(),a=r.split(".")[0],i="".concat(a,".").concat(Rt.a.depositiumContractId),!P.a.isSignedIn()){t.next=15;break}return t.next=12,Object(_t.c)({accountId:i});case 12:t.t0=t.sent,t.next=16;break;case 15:t.t0={};case 16:if(o=t.t0,!P.a.isSignedIn()){t.next=23;break}return t.next=20,Object(_t.e)({accountId:i});case 20:t.t1=t.sent,t.next=24;break;case 23:t.t1={};case 24:return c=t.t1,s={"usdc-aromankov.testnet":1,"wrap_near-aromankov.testnet":10.6},l=n.filter((function(t){return kt.includes(t.farm_id)})),l.map((function(t){return wt(t.farm_id)})),d={},t.next=31,Object(_t.b)();case 31:if(u=t.sent)for(p=0;p<u.length;p++)f=u[p].token_account_ids[0],h=u[p].token_account_ids[1],b=new vt.BigNumber(u[p].amounts[0]).dividedBy(new vt.BigNumber(10).pow(18)).multipliedBy(s[f]),x=new vt.BigNumber(u[p].amounts[1]).dividedBy(new vt.BigNumber(10).pow(24)).multipliedBy(s[h]),d["".concat(Rt.a.financeContractId,"@").concat(p,"#1")]={shares_total_supply:u[p].shares_total_supply,token_symbols:u[p].token_account_ids,tvl:b.plus(x).toFixed(0)};j=[],g=Object(gt.a)(l),t.prev=35,g.s();case 37:if((O=g.n()).done){t.next=46;break}return y=O.value,t.t2=j,t.next=42,At(y,d[y.farm_id],c[y.seed_id],s,o[y.reward_token],e[y.seed_id],wt(y.farm_id));case 42:t.t3=t.sent,t.t2.push.call(t.t2,t.t3);case 44:t.next=37;break;case 46:t.next=51;break;case 48:t.prev=48,t.t4=t.catch(35),g.e(t.t4);case 51:return t.prev=51,g.f(),t.finish(51);case 54:return t.abrupt("return",j);case 55:case"end":return t.stop()}}),t,null,[[35,48,51,54]])})));return function(){return t.apply(this,arguments)}}();var Ft=function(t){return t.sort((function(t,e){return"active"===t.status?-1:1}))},It=n(522),Dt=n(521),Lt=function(t){var e=t.token,n=t.style;return Object(r.useMemo)((function(){switch(e){case"REF":case"REF-NEAR":return Object(B.jsx)("img",{style:n,src:"./icons/ref.png",height:28,width:28});case"NEAR":return Object(B.jsx)("img",{style:n,src:"./icons/near.png",height:28,width:28});case"USDC":return Object(B.jsx)("img",{style:n,src:"./icons/usdc.svg",height:28,width:28});case"USDT":return Object(B.jsx)("img",{style:n,src:"./icons/usdt.png",height:28,width:28});case"Metapool stNEAR":return Object(B.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 67.79 67.79",width:"28",height:"28",version:"1.1",children:[Object(B.jsx)("path",{fill:"#fff",d:"M33.934.311a33.9 33.9 0 1 0 33.89 33.9 33.9 33.9 0 0 0-33.89-33.9z",id:"path505"}),Object(B.jsx)("path",{stroke:"none",fill:"#ffbd00",strokeWidth:"1px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeOpacity:1,fillOpacity:1,d:"m11.803 27.8 12.387.359 2.361 5.959 7.616 3.31 8.523-3.322 2.348-5.87 12.269.03L54.822 54.2 31.837 58.86 12.89 52.648z",id:"path1051"}),Object(B.jsx)("path",{stroke:"none",fill:"#a0a0ff",strokeWidth:"1px",strokeLinecap:"butt",strokeLinejoin:"miter",strokeOpacity:1,fillOpacity:1,d:"m34.657 12.575-10.43 9.633 1.096 10.01 8.844 5.21 9.785-5.287 1.086-11.33z",id:"path1815"}),Object(B.jsx)("path",{id:"path928",fill:"#666",fillOpacity:1,d:"M33.928 4.282a29.93 29.93 0 0 1 4.682.367 29.93 29.93 0 0 1 25.244 29.572 29.93 29.93 0 0 1-29.92 29.92 29.93 29.93 0 0 1-.006-59.86zm.729 8.293c-2.03 5.668-8.815 9.76-8.815 14.521 0 4.76 3.912 8.62 8.737 8.62 4.824 0 8.736-3.86 8.736-8.62s-6.707-8.697-8.658-14.521zM37.84 22.67a2.524 2.446 0 0 1 .246.012 2.524 2.446 0 0 1 .246.035 2.524 2.446 0 0 1 .24.059 2.524 2.446 0 0 1 .233.08 2.524 2.446 0 0 1 .225.104 2.524 2.446 0 0 1 .213.123 2.524 2.446 0 0 1 .197.142 2.524 2.446 0 0 1 .183.162 2.524 2.446 0 0 1 .168.178 2.524 2.446 0 0 1 .147.191 2.524 2.446 0 0 1 .127.207 2.524 2.446 0 0 1 .105.217 2.524 2.446 0 0 1 .084.227 2.524 2.446 0 0 1 .06.232 2.524 2.446 0 0 1 .038.237 2.524 2.446 0 0 1 .012.24 2.524 2.446 0 0 1-.086.633 2.524 2.446 0 0 1-.252.59 2.524 2.446 0 0 1-.403.507 2.524 2.446 0 0 1-.521.389 2.524 2.446 0 0 1-.61.244 2.524 2.446 0 0 1-.652.084 2.524 2.446 0 0 1-.654-.084 2.524 2.446 0 0 1-.607-.244 2.524 2.446 0 0 1-.524-.389 2.524 2.446 0 0 1-.4-.508 2.524 2.446 0 0 1-.252-.59 2.524 2.446 0 0 1-.086-.632 2.524 2.446 0 0 1 .086-.633 2.524 2.446 0 0 1 .252-.59 2.524 2.446 0 0 1 .4-.506A2.524 2.446 0 0 1 36.58 23a2.524 2.446 0 0 1 .607-.247 2.524 2.446 0 0 1 .654-.082zM24.19 28.16a16.579 2.485 0 0 0-6.502 1.965 16.579 2.485 0 0 0 7.635 2.093 10.483 10.6 0 0 1-1.133-4.058zm20.848.078a10.483 10.6 0 0 1-1.086 3.904 16.579 2.485 0 0 0 6.894-2.017 16.579 2.485 0 0 0-5.808-1.887zm6.925 3.21c-.455 1.177-4.097 2.154-9.273 2.659a10.483 10.6 0 0 1-8.072 3.861 10.483 10.6 0 0 1-8.067-3.85c-5.276-.506-8.978-1.498-9.398-2.64h-.049v5.17h.049a.69.69 0 0 0-.049.24c0 1.8 7.81 3.25 17.43 3.25 9.62 0 17.43-1.45 17.43-3.25a.69.69 0 0 0 0-.24zm.032 7.323c-.67 1.73-8.22 3.03-17.43 3.03-9.23 0-16.771-1.34-17.381-3h-.049v5.17h.049a.69.69 0 0 0-.049.24c0 1.8 7.81 3.25 17.43 3.25 9.62 0 17.43-1.45 17.43-3.25a.69.69 0 0 0 0-.24zm0 7.21c-.67 1.69-8.22 3.03-17.43 3.03-9.23 0-16.771-1.34-17.381-3h-.049v5.17h.049a.69.69 0 0 0-.049.24c0 1.8 7.81 3.25 17.43 3.25 9.62 0 17.43-1.45 17.43-3.25a.69.69 0 0 0 0-.24z"})]});default:return Object(B.jsx)("img",{style:n,src:"",height:28,width:28})}}),[n,e])},Nt=function(){return Object(B.jsx)("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(B.jsx)("path",{d:"M6.93754 0.889572H0.872005C0.4372 0.889572 0.0893555 1.27031 0.0893555 1.74623V10.2415C0.0893555 10.7174 0.4372 11.0981 0.872005 11.0981H6.94841C7.38321 11.0981 7.73106 10.7174 7.73106 10.2415V1.74623C7.72018 1.27031 7.37234 0.889572 6.93754 0.889572ZM2.66558 9.25393C2.66558 9.36101 2.57861 9.4562 2.48078 9.4562H1.50247C1.40464 9.4562 1.31768 9.36101 1.31768 9.25393V8.1831C1.31768 8.07602 1.40464 7.98083 1.50247 7.98083H2.48078C2.57861 7.98083 2.66558 8.07602 2.66558 8.1831V9.25393ZM2.66558 7.17176C2.66558 7.27885 2.57861 7.37403 2.48078 7.37403H1.50247C1.40464 7.37403 1.31768 7.27885 1.31768 7.17176V6.10094C1.31768 5.99385 1.40464 5.89867 1.50247 5.89867H2.48078C2.57861 5.89867 2.66558 5.99385 2.66558 6.10094V7.17176ZM4.57872 9.25393C4.57872 9.36101 4.49176 9.4562 4.39393 9.4562H3.41561C3.31778 9.4562 3.23082 9.36101 3.23082 9.25393V8.1831C3.23082 8.07602 3.31778 7.98083 3.41561 7.98083H4.39393C4.49176 7.98083 4.57872 8.07602 4.57872 8.1831V9.25393ZM4.57872 7.17176C4.57872 7.27885 4.49176 7.37403 4.39393 7.37403H3.41561C3.31778 7.37403 3.23082 7.27885 3.23082 7.17176V6.10094C3.23082 5.99385 3.31778 5.89867 3.41561 5.89867H4.39393C4.49176 5.89867 4.57872 5.99385 4.57872 6.10094V7.17176ZM6.49186 9.25393C6.49186 9.36101 6.4049 9.4562 6.30707 9.4562H5.32876C5.23093 9.4562 5.14397 9.36101 5.14397 9.25393V8.1831C5.14397 8.07602 5.23093 7.98083 5.32876 7.98083H6.30707C6.4049 7.98083 6.49186 8.07602 6.49186 8.1831V9.25393ZM6.49186 7.17176C6.49186 7.27885 6.4049 7.37403 6.30707 7.37403H5.32876C5.23093 7.37403 5.14397 7.27885 5.14397 7.17176V6.10094C5.14397 5.99385 5.23093 5.89867 5.32876 5.89867H6.30707C6.4049 5.89867 6.49186 5.99385 6.49186 6.10094V7.17176ZM6.85057 4.55418C6.85057 4.66127 6.76361 4.75645 6.66578 4.75645H1.14376C1.04593 4.75645 0.958966 4.66127 0.958966 4.55418V2.43632C0.958966 2.32924 1.04593 2.23406 1.14376 2.23406H6.67665C6.77448 2.23406 6.86144 2.32924 6.86144 2.43632V4.55418H6.85057Z",fill:"#0097A7"})})},Wt=a.a.memo(Nt),Ht=n(512),Ut=function(t){var e=t.days,n=t.apr,a=t.amount,i=t.onDaysChange,o=Object(r.useCallback)((function(t,e){Number(e)&&i(e.toString())}),[i]),c=Object(r.useMemo)((function(){return Number(a)?(Number(a)*n*e/365/100*w.getState().balance.rate).toFixed(2):0}),[a,n,e]);return Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:14,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:"Days"}),Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:14,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5,width:160},children:"Profit"})]}),Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsxs)("div",{style:{flexDirection:"column",flexGrow:1,marginRight:22},children:[Object(B.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:"26px",opacity:.3},children:"1"}),Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:12,fontStyle:"normal",fontWeight:"normal",lineHeight:"26px",opacity:.3},children:"90"})]}),Object(B.jsx)("div",{style:{marginLeft:4,marginRight:6},children:Object(B.jsx)(Ht.a,{defaultValue:1,onChange:o,min:1,max:90,size:"small",step:1,"aria-label":"Default",valueLabelDisplay:"auto"})})]}),Object(B.jsx)("div",{style:{backgroundColor:"#383838",border:"1px solid #413F3F",borderRadius:5,boxShadow:"inset 0px 4px 4px #383030",boxSizing:"border-box",display:"flex",height:33,justifyContent:"center",minWidth:160,paddingTop:4},children:Object(B.jsx)("div",{style:{color:"#FFFFFF",fontSize:12,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"$ ".concat(c)})})]})]})},zt=a.a.memo(Ut),Bt=function(t){var e=t.amount,n=t.onAmountChange,a=t.errorMessage,i=Object(r.useCallback)((function(t){n(t.target.value)}),[n]),o=Object(r.useMemo)((function(){return Number(e)?(Number(e)*w.getState().balance.rate).toFixed(2):0}),[e]);return Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:14,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:"Deposit"}),Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("input",{value:e,onChange:i,style:{backgroundColor:"#FFFFFF",border:"1px solid #DDDDDD",borderRadius:5,boxSizing:"border-box",flexGrow:1,fontSize:12,fontStyle:"normal",fontWeight:"normal",height:33,lineHeight:"26px",maxLines:1,overflowX:"scroll",paddingLeft:14,paddingRight:14,resize:"none",whiteSpace:"nowrap"},placeholder:"NEAR"}),Object(B.jsx)("div",{style:{border:"1px solid #000000",margin:"0px 6px 0px 6px ",opacity:.2,width:13}}),Object(B.jsx)("div",{style:{backgroundColor:"#383838",border:"1px solid #413F3F",borderRadius:5,boxShadow:"inset 0px 4px 4px #383030",boxSizing:"border-box",display:"flex",height:33,justifyContent:"center",minWidth:160,paddingTop:4},children:Object(B.jsx)("div",{style:{color:"#FFFFFF",fontSize:12,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"$ ".concat(o)})})]}),a&&Object(B.jsx)("div",{style:{color:"red",fontSize:11,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5},children:a})]})},Mt=a.a.memo(Bt),Kt=function(t){var e=t.pair,n=t.apr;return Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex"},children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{fontSize:20,fontStyle:"normal",fontWeight:500,lineHeight:"26px"},children:"".concat(e.first,"-").concat(e.second)}),Object(B.jsxs)("div",{style:{marginLeft:"24px"},children:[Object(B.jsx)(Lt,{token:e.first}),Object(B.jsx)(Lt,{style:{marginLeft:10,marginRight:32},token:e.second})]})]}),Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{border:"1px solid #000000",height:26,opacity:.2}}),Object(B.jsx)("div",{style:{display:"flex",fontSize:"20px",fontStyle:"normal",fontWeight:500,justifyContent:"center",lineHeight:"26px",minWidth:160},children:"APR: ".concat(n,"%")})]})]})},Vt=a.a.memo(Kt),Xt=function(t){var e=t.token,n=t.apr;return Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",marginRight:20,width:180},children:[Object(B.jsx)("div",{style:{fontSize:20,fontStyle:"normal",fontWeight:500,lineHeight:"26px"},children:"".concat(e)}),Object(B.jsx)(Lt,{token:e})]}),Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{border:"1px solid #000000",height:26,opacity:.2}}),Object(B.jsx)("div",{style:{display:"flex",fontSize:"20px",fontStyle:"normal",fontWeight:500,justifyContent:"center",lineHeight:"26px",minWidth:160},children:"APR: ".concat(n,"%")})]})]})},$t=a.a.memo(Xt),Zt=q.b().shape({amount:q.a().typeError("Invalid amount!").min(.01,"Too Short!").max(1e4,"Too Long!"),days:q.a().min(1,"Too Short!").max(90,"Too Long!")}),qt=function(t){var e=t.strategy,n=t.onClose,i=t.onStartStrategy,o=Object(r.useCallback)((function(){switch(e._type){case"stake":return Object(B.jsx)($t,{token:e.token,apr:e.apr});case"farm":return Object(B.jsx)(Vt,{pair:e.pair,apr:e.apr})}}),[e]),c=Object(r.useCallback)((function(t){var e=t.amount,n=t.strategyId;i(e,String(n))}),[i]);return Object(B.jsx)(a.a.Fragment,{children:Object(B.jsx)(Z.b,{initialValues:{amount:"",strategyId:e.id,days:1},validationSchema:Zt,onSubmit:c,children:function(t){var r=t.errors,a=(t.touched,t.values),i=t.handleChange,c=t.handleSubmit;return Object(B.jsxs)("div",{style:{backgroundColor:"#E9EDF0",border:"1px solid #E9EDF0",borderRadius:10,boxShadow:"0px 4px 10px rgba(204, 204, 204, 0.25)",boxSizing:"border-box",left:"50%",paddingBottom:26,paddingTop:28,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"auto"},children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",paddingLeft:39,paddingRight:18},children:[Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:20,fontStyle:"normal",fontWeight:"bold",lineHeight:"26px"},children:"Farming"}),Object(B.jsx)(W.a,{onClick:n,"aria-label":"delete",size:"small",children:Object(B.jsx)(G,{})})]}),Object(B.jsx)("div",{style:{border:"1px solid #000000",margin:"10px 0px 20px 0px ",opacity:.2}}),Object(B.jsxs)(Z.a,{children:[Object(B.jsxs)("div",{style:{paddingLeft:39,paddingRight:39},children:[o(),Object(B.jsx)(Jt,{}),Object(B.jsx)(Mt,{amount:a.amount,onAmountChange:i("amount"),errorMessage:r.amount}),Object(B.jsx)(Jt,{}),Object(B.jsx)(zt,{days:a.days,apr:Number(e.apr),amount:a.amount,onDaysChange:i("days")})]}),Object(B.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:26},children:"active"==e.status&&P.a.isSignedIn()&&Object(B.jsx)(Gt,{onClick:function(){return c()},children:"Start"})})]})]})}})})},Jt=function(){return Object(B.jsx)("div",{style:{border:"1px solid #000000",margin:"10px 0px 13px 0px ",opacity:.05}})},Gt=Object(X.a)($.a)({backgroundColor:"#0097A7",borderRadius:20,color:"#FFFFFF",fontSize:"12px",fontStyle:"normal",fontWeight:"bold",height:33,lineHeight:"26px",marginRight:"8px",padding:"6px",textTransform:"none",width:110}),Yt=a.a.memo(qt),Qt=function(t){var e=t.strategy,n=t.onStartStrategy,a=Object(r.useState)(!1),i=Object(F.a)(a,2),o=i[0],c=i[1],s=Object(r.useCallback)((function(){c(!0)}),[]),l=Object(r.useCallback)((function(){c(!1)}),[]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:"20px",fontStyle:"normal",fontWeight:"bold",lineHeight:"26px",marginLeft:"14px"},children:e.provider}),Object(B.jsx)(te,{onClick:s,variant:"text",startIcon:Object(B.jsx)(Wt,{}),children:"Calculate"})]}),Object(B.jsx)("div",{style:{border:"1px solid #000000",margin:"10px 14px 30px 14px ",opacity:.1}}),Object(B.jsx)(at.a,{open:o,onClose:l,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:Object(B.jsx)(Yt,{strategy:e,onClose:l,onStartStrategy:n})})]})},te=Object(X.a)($.a)({color:"#0097A7",fontSize:"12px",fontStyle:"normal",fontWeight:"bold",lineHeight:"26px",marginRight:"8px",padding:"6px",textTransform:"none"}),ee=a.a.memo(Qt),ne=function(t){var e=t.depositAmount,n=t.profitAmount;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("div",{style:{border:"1px solid #000000",margin:"30px 14px 18px 14px ",opacity:.1}}),Object(B.jsx)(re,{label:"Deposit",amount:e}),Object(B.jsx)(re,{label:"Profit",amount:n})]})},re=function(t){var e=t.label,n=t.amount,a=Object(r.useMemo)((function(){return Number(n)?(Number(n)*w.getState().balance.rate).toFixed(2):0}),[n]);return Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",marginLeft:14,marginRight:20,marginTop:12},children:[Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:20,fontStyle:"normal",fontWeight:"bold",lineHeight:"20px",opacity:.9},children:"".concat(e,":")}),Object(B.jsxs)("div",{style:{flexDirection:"column"},children:[Object(B.jsx)("div",{style:{fontSize:14,fontStyle:"normal",fontWeight:"bold",lineHeight:"20px",textAlign:"end",textTransform:"uppercase"},children:"".concat(n.toFixed(2)," NEAR")}),Object(B.jsx)("div",{style:{fontSize:12,fontStyle:"normal",fontWeight:500,lineHeight:"26px",opacity:.5,textAlign:"end"},children:"$".concat(a," USD")})]})]})},ae=a.a.memo(ne),ie=function(t){var e=t.farm,n=Object(r.useMemo)((function(){switch(e.status){case"in-progress":return"#00D254";case"active":return"#00ADD2";case"soon":return"#F0B622"}}),[e.status]),a=Object(c.b)(),i=Object(r.useCallback)((function(t,e){console.log("onStartStrategy ".concat(t," - ").concat(e)),a(b({amount:t,strategyId:e}))}),[a]);return Object(B.jsxs)(Dt.a,{sx:{borderBlock:"solid",borderColor:"#ECECEC",borderRadius:"10px",borderWidth:"1px",boxShadow:"0px 4px 20px rgba(103, 103, 103, 0.25)",mb:"26px",overflow:"hidden",position:"relative",width:"100%"},children:[Object(B.jsx)(k.a,{sx:{backgroundColor:n,height:"8px",width:"100%"}}),"soon"===e.status&&Object(B.jsx)("div",{style:{left:"50%",position:"absolute",top:0,transform:"translate(-50%)"},children:Object(B.jsx)("div",{style:{backgroundColor:"#F0B622",borderRadius:6,color:"#FFFFFF",fontSize:13,fontStyle:"normal",fontWeight:500,lineHeight:"26px",marginLeft:5,paddingLeft:8,paddingRight:8},children:"Coming soon"})}),Object(B.jsxs)(k.a,{sx:{pb:"34px",pt:"12px"},children:[Object(B.jsx)(ee,{strategy:e,onStartStrategy:i}),Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex"},children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",marginLeft:14,marginRight:20,width:200},children:[Object(B.jsx)("div",{style:{fontSize:20,fontStyle:"normal",fontWeight:500,lineHeight:"26px"},children:"".concat(e.pair.first,"-").concat(e.pair.second)}),Object(B.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:66},children:[Object(B.jsx)(Lt,{token:e.pair.first}),Object(B.jsx)(Lt,{token:e.pair.second})]})]}),Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{border:"1px solid #000000",height:26,opacity:.2}}),Object(B.jsx)("div",{style:{display:"flex",fontSize:"20px",fontStyle:"normal",fontWeight:500,justifyContent:"center",lineHeight:"26px",width:160},children:"APR: ".concat(e.apr,"%")})]})]}),Object(B.jsx)(ae,{depositAmount:e.depositAmount,profitAmount:e.profitAmount})]})]})},oe=a.a.memo(ie);var ce=function(t){var e=t.stake,n=Object(r.useMemo)((function(){switch(e.status){case"in-progress":return"#00D254";case"active":return"#00ADD2";case"soon":return"#F0B622"}}),[e.status]),a=Object(c.b)(),i=Object(r.useCallback)((function(t,e){a(b({amount:t,strategyId:e}))}),[a]);return Object(B.jsxs)(Dt.a,{sx:{borderBlock:"solid",borderColor:"#ECECEC",borderRadius:"10px",borderWidth:"1px",boxShadow:"0px 4px 20px rgba(103, 103, 103, 0.25)",mb:"26px",overflow:"hidden",width:"100%"},children:[Object(B.jsx)(k.a,{sx:{backgroundColor:n,height:"8px",width:"100%"}}),Object(B.jsxs)(k.a,{sx:{pb:"34px",pt:"12px"},children:[Object(B.jsx)(ee,{strategy:e,onStartStrategy:i}),Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex"},children:[Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between",marginLeft:14,marginRight:20,width:200},children:[Object(B.jsx)("div",{style:{fontSize:20,fontStyle:"normal",fontWeight:500,lineHeight:"26px"},children:"".concat(e.token)}),Object(B.jsx)(Lt,{token:e.token})]}),Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Object(B.jsx)("div",{style:{border:"1px solid #000000",height:26,opacity:.2}}),Object(B.jsx)("div",{style:{display:"flex",fontSize:"20px",fontStyle:"normal",fontWeight:500,justifyContent:"center",lineHeight:"26px",width:160},children:"APR: ".concat(e.apr,"%")})]})]}),Object(B.jsx)(ae,{depositAmount:e.depositAmount,profitAmount:e.profitAmount})]})]})},se=a.a.memo(ce),le=function(){var t=function(){var t=Object(r.useState)([]),e=Object(F.a)(t,2),n=e[0],a=e[1],i=Object(r.useCallback)((function(t){console.log(t);var e,n=Rt.a.activeFarms;return e="InProgress"===t.farm_status?"in-progress":n.includes(t.farm_id)?"active":"soon",{_type:"farm",apr:t.apr,depositAmount:15,id:t.farm_id,pair:{first:t.pool.token_symbols[0].split("-")[0].replace("wrap_","").toUpperCase(),second:t.pool.token_symbols[1].split("-")[0].replace("wrap_","").toUpperCase()},profitAmount:3,provider:"REF Farming",status:e}}),[]);return Object(r.useEffect)((function(){function t(){return(t=Object(g.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pt();case 2:e=t.sent,a(Ft(e.map(i)));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}0===n.length&&function(){t.apply(this,arguments)}()}),[n,i]),{farms:n}}(),e=t.farms,n=function(){var t=Object(r.useState)([{_type:"stake",apr:"10.5",depositAmount:12,id:1,profitAmount:9,provider:"Staking",status:"soon",token:"Metapool stNEAR"},{_type:"stake",apr:"50.34",depositAmount:7,id:2,profitAmount:3,provider:"REF Farming",status:"soon",token:"REF-NEAR"}]),e=Object(F.a)(t,2),n=e[0];return e[1],{stakes:n}}(),a=n.stakes,i=Object(r.useCallback)((function(t){switch(t._type){case"stake":return Object(B.jsx)(se,{stake:t});case"farm":return Object(B.jsx)(oe,{farm:t})}}),[]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:23},children:[Object(B.jsx)(de,{color:"#00D254",label:"In progress"}),Object(B.jsx)(de,{color:"#00ADD2",label:"Active"}),Object(B.jsx)(de,{color:"#F0B622",label:"Coming soon"})]}),e.length>0?Object(B.jsx)(k.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",mb:2.5,mx:2.5},children:[].concat(Object(mt.a)(e),Object(mt.a)(a)).map((function(t,e){return Object(B.jsx)(k.a,{sx:{mx:2.5},children:i(t)},t.id)}))}):Object(B.jsx)("div",{style:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center"},children:Object(B.jsx)(It.a,{color:"success"})})]})},de=function(t){var e=t.color,n=t.label;return Object(B.jsxs)("div",{style:{alignItems:"center",display:"flex",margin:"20px 18px 0px 18px"},children:[Object(B.jsx)("div",{style:{backgroundColor:e,borderRadius:10,height:15,width:15}}),Object(B.jsx)("div",{style:{color:"#2D2D2D",fontSize:11,fontStyle:"normal",fontWeight:500,lineHeight:"26px",marginLeft:5,opacity:.4},children:" - ".concat(n)})]})},ue=a.a.memo(le),pe=Object(R.a)({palette:{primary:{contrastText:"#000",dark:"#808e95",light:"#e2f1f8",main:"#B0BEC5"},secondary:{contrastText:"#000",dark:"#009faf",light:"#88ffff",main:"#4DD0E1"}}}),fe=function(){return Object(B.jsxs)(k.a,{sx:{borderRadius:"10px",display:"grid",gridArea:"page",gridTemplateAreas:'"balance strategies"',gridTemplateColumns:"3fr 8fr",height:"100%",overflow:"hidden",width:"100%"},children:[Object(B.jsx)(k.a,{sx:{gridArea:"balance"},children:Object(B.jsx)(jt,{})}),Object(B.jsx)(k.a,{sx:{backgroundColor:"#F8F8F8",gridArea:"strategies",height:"auto",maxHeight:"100%",overflowY:"auto"},children:Object(B.jsx)(ue,{})})]})},he=function(){return Object(B.jsx)(k.a,{sx:{backgroundColor:"#F8F8F8",borderRadius:"10px",gridArea:"page",height:"100%",minHeight:"100%",overflow:"hidden",overflowY:"auto",width:"100%"},children:Object(B.jsx)(ue,{})})},be=function(){return Object(B.jsx)(T.a,{theme:pe,children:Object(B.jsxs)("div",{className:"App",children:[Object(B.jsx)(A.a,{}),Object(B.jsxs)(k.a,{sx:{display:"grid",gridTemplateAreas:'"header header"\n          "page page"',gridTemplateRows:"1fr 6fr",height:"100%",pb:10,px:10,width:"100%"},children:[Object(B.jsx)(k.a,{sx:{gridArea:"header"},children:Object(B.jsx)(pt,{})}),P.a.isSignedIn()?Object(B.jsx)(fe,{}):Object(B.jsx)(he,{})]})]})})},xe=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,523)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),i(t),o(t)}))};o.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(c.a,{store:w,children:Object(B.jsx)(be,{})})}),document.getElementById("root")),xe()},52:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return u})),n.d(e,"e",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"a",(function(){return h}));var r=n(12),a=n.n(r),i=n(27),o=n(61),c=n(54),s=n(90),l=n(28),d=new c.Near(Object(o.a)({keyStore:new c.keyStores.InMemoryKeyStore},{explorerUrl:"https://explorer.testnet.near.org",helperUrl:"https://helper.testnet.near.org",networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org"})),u=new c.Near(Object(o.a)({keyStore:new c.keyStores.InMemoryKeyStore},{explorerUrl:"https://explorer.mainnet.near.org",helperUrl:"https://helper.mainnet.near.org",networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",walletUrl:"https://wallet.mainnet.near.org"})),p=function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r=[],t.next=4,Object(s.b)(l.a.wrapNearContractId);case 4:return(i=t.sent)&&"0"!==i.total||r.push({amount:"0.00125",args:{},gas:"30000000000000",methodName:"storage_deposit"}),r.push({amount:e,args:{},gas:"50000000000000",methodName:"near_deposit"}),r.push({amount:"0.000000000000000000000001",args:{amount:c.utils.format.parseNearAmount(e),msg:"",receiver_id:l.a.depositiumContractId},gas:"50000000000000",methodName:"ft_transfer_call"}),n.push({functionCalls:r,receiverId:l.a.wrapNearContractId}),t.abrupt("return",Object(s.a)(n));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],console.log("startStrategy",e),r=s.c.getAccountId(),i=r.split(".")[0],o="".concat(i,".").concat(l.a.depositiumContractId),n.push({functionCalls:[{amount:"4",args:{accound_sub_id:i},gas:"300000000000000",methodName:"create"}],receiverId:l.a.depositiumContractId}),n.push({functionCalls:[{amount:"0.1",args:{account_id:o},gas:"300000000000000",methodName:"storage_deposit"}],receiverId:l.a.wrapNearContractId}),n.push({functionCalls:[{methodName:"storage_deposit",args:{account_id:o},amount:"0.1",gas:"300000000000000"}],receiverId:l.a.farmingContractId}),n.push({functionCalls:[{args:{},gas:"300000000000000",methodName:"init"}],receiverId:o}),n.push({functionCalls:[{args:{account_id:r,sub_account_id:o,amount:c.utils.format.parseNearAmount(e)},gas:"300000000000000",methodName:"start_strategy"}],receiverId:l.a.depositiumContractId}),t.abrupt("return",Object(s.a)(n));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK_ID:"TESTNET",REACT_APP_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_HELPER_URL:"https://helper.testnet.mainnet.near.org",REACT_APP_EXPLORER_URL:"https://explorer.testnet.mainnet.near.org",REACT_APP_INDEXER_URL:"https://testnet-indexer.ref-finance.com"}).REACT_APP_ACCOUNT_HELPER_URL+"/fiat",{headers:{"Content-type":"application/json; charset=UTF-8"},method:"GET"}).then((function(t){return t.json()})).catch((function(){return{near:{cny:66.36,eur:8.98,last_updated_at:1636159198,usd:10.37}}})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},90:function(t,e,n){"use strict";n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return _}));var r=n(12),a=n.n(r),i=n(27),o=n(31),c=n(32),s=n(45),l=n(46),d=n(61),u=n(60),p=n.n(u),f=n(87),h=n(54),b=n(96),x=n(143),j=n(28),m=new h.Near(Object(d.a)({keyStore:new h.keyStores.InMemoryKeyStore},j.a)),g=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"_checkConnectedAccount",value:function(){this._connectedAccount||(this._connectedAccount=new C(this,this._near.connection,this._authData.accountId))}},{key:"account",value:function(){return this._checkConnectedAccount(),this._connectedAccount}},{key:"createTransaction",value:function(t){var e=t.receiverId,n=t.actions,r=t.nonceOffset,a=void 0===r?1:r;return this._checkConnectedAccount(),this._connectedAccount.createTransaction({receiverId:e,actions:n,nonceOffset:a})}}]),n}(h.WalletConnection),O=new g(m,j.a.depositiumContractId),y=function(t,e){var n=e.methodName,r=e.args;return O.account().viewFunction(t,n,r)},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.getAccountId();return y(t,{args:{account_id:e},methodName:"storage_balance_of"})},_=function(){var t=Object(i.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map((function(t,e){return O.createTransaction({actions:t.functionCalls.map((function(t){return Object(b.functionCall)(t.methodName,t.args,(n=t.gas)?new p.a(n):new p.a("100000000000000"),(e=t.amount)?new p.a(h.utils.format.parseNearAmount(e)):new p.a("0"));var e,n})),nonceOffset:e+1,receiverId:t.receiverId})})));case 2:return r=t.sent,t.abrupt("return",O.requestSignTransactions(r,n));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"sendTransactionWithActions",value:function(){var t=Object(i.a)(a.a.mark((function t(e,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.signAndSendTransaction(e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"createTransaction",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i,o,c,s,l,d,u,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.receiverId,r=e.actions,i=e.nonceOffset,o=void 0===i?1:i,t.next=3,this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);case 3:return c=t.sent,t.next=6,this.accessKeyForTransaction(n,r,c);case 6:if(s=t.sent){t.next=9;break}throw new Error("Cannot find matching key for transaction sent to ".concat(n));case 9:return t.next=11,this.connection.provider.block({finality:"final"});case 11:return l=t.sent,d=Object(f.baseDecode)(l.header.hash),u=x.PublicKey.from(s.public_key),p=s.access_key.nonce+o,t.abrupt("return",Object(b.createTransaction)(this.accountId,u,n,p,r,d));case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(h.ConnectedWalletAccount)},92:function(t,e,n){"use strict";(function(t){n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return b}));var r=n(12),a=n.n(r),i=n(27),o=n(52),c=n(36),s=n(28),l=function(e){var n=e.methodName,r=e.args,a=void 0===r?{}:r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.farmingContractId;return o.c.connection.provider.query({account_id:i,args_base64:t.from(JSON.stringify(a)).toString("base64"),finality:"final",method_name:n,request_type:"call_function"}).then((function(e){var n=e.result;return JSON.parse(t.from(n).toString())}))},d=function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l({args:{from_index:0,limit:100},methodName:"list_seeds"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l({args:{from_index:0,limit:100},methodName:"list_farms"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l({args:{from_index:0,limit:100},methodName:"get_pools"},s.a.financeContractId);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.accountId,r=void 0===n?c.a.getAccountId():n,t.abrupt("return",l({args:{account_id:r},methodName:"list_rewards"},s.a.farmingContractId));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.accountId,r=void 0===n?c.a.getAccountId():n,t.next=3,l({args:{account_id:r},methodName:"list_user_seeds"},s.a.farmingContractId);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.farmId,r=e.accountId,i=void 0===r?c.a.getAccountId():r,t.next=3,l({args:{account_id:i,farm_id:n},methodName:"get_user_rps"},s.a.financeContractId);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}).call(this,n(65).Buffer)}},[[453,1,2]]]);
//# sourceMappingURL=main.9e51d2e8.chunk.js.map